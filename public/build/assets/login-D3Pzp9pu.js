import{V as A,r as _,p as B}from"./VForm-BS6s1CZ4.js";import{u as F}from"./AuthStore-CEsAf0W6.js";import{l as M}from"./logo2-BPpRnXaw.js";import{_ as N,r as i,E as P,b as T,J as E,d as $,f as L,n as t,c as a,w as s,o as h,s as l,e as U,B as v,t as q,y as R,A as j,k as D,l as J}from"./main-DSQZSxUQ.js";import{d as W,e as z,b as y,V as G,a as w}from"./VCard-BcqOFmVx.js";import{V as b}from"./VTextField-BBk40cWF.js";import{V as H}from"./VAlert-B9VyE3fI.js";import"./forwardRefs-DpySFFSZ.js";import"./VImg-DH09EEkr.js";const x=u=>(D("data-v-1dd2e5eb"),u=u(),J(),u),K={class:"auth-wrapper"},O={class:"auth-content"},Q={class:"d-flex"},X=["src"],Y=x(()=>t("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to UNIMAS! ",-1)),Z=x(()=>t("p",{class:"mb-0"}," Please login to your account. ",-1)),ee={class:"text-center d-flex flex-wrap mt-3 mb-4",style:{"margin-inline-start":"50px"}},ae={__name:"login",setup(u){const r=F(),d=i(""),m=i(""),g=P(),c=T(),f=i(""),V=i(!1),k=E();$(()=>k.global.name.value==="light"?authV1MaskLight:authV1MaskDark);const C=async()=>{await r.login(d.value,m.value),r.isLoggedIn==!0?(await r.getCurrentLoggedUser(),r.user.roles.some(n=>n.name==="Admin")?c.replace("/admin-dashboard"):c.replace("/dashboard")):(d.value==""||m.value==""?f.value="Please fill in all the fields":f.value=r.errorMessages,V.value=!0)},I=()=>{c.replace(g.query.to?String(g.query.to):"/forgot-password")},S=n=>/^[0-9]{5}@siswa\.unimas\.my$/.test(n)||"Email format is invalid, please use your unimas email",p=i(!1);return(n,e)=>(h(),L("div",K,[t("div",O,[a(W,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:s(()=>[a(z,{class:"justify-center"},{prepend:s(()=>[t("div",Q,[t("img",{src:l(M),alt:"Materio",class:"mr-2",height:"180",width:"200"},null,8,X)])]),_:1}),a(y,{class:"pt-2"},{default:s(()=>[Y,Z]),_:1}),a(y,null,{default:s(()=>[a(l(A),{ref:"refForm"},{default:s(()=>[a(G,null,{default:s(()=>[a(w,{cols:"12"},{default:s(()=>[a(b,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),label:"Email",type:"email",rules:[l(_),S]},null,8,["modelValue","rules"])]),_:1}),a(w,{cols:"12"},{default:s(()=>[a(b,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),label:"Password",placeholder:"············",rules:[l(_),l(B)],type:p.value?"text":"password","append-inner-icon":p.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":e[2]||(e[2]=o=>p.value=!p.value)},null,8,["modelValue","rules","type","append-inner-icon"]),V.value?(h(),U(H,{key:0,type:"error",variant:"tonal",closable:"",class:"mt-2"},{default:s(()=>[v(q(f.value),1)]),_:1})):R("",!0),t("div",{class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},[t("a",{style:{cursor:"pointer"},class:"ms-2 mb-1 text-primary",onClick:I}," Forgot Password? ")]),a(j,{block:"",type:"button",onClick:e[3]||(e[3]=o=>n.$refs.refForm.validate().then(()=>C()))},{default:s(()=>[v(" Login ")]),_:1}),t("div",ee,[v(" New on our platform? "),t("a",{style:{cursor:"pointer"},class:"ms-2 mb-1 text-primary",onClick:e[4]||(e[4]=o=>l(c).push("/register"))}," Create an account ")])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])]))}},me=N(ae,[["__scopeId","data-v-1dd2e5eb"]]);export{me as default};
