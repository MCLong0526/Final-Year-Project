import{_ as de}from"./CardStatisticsHorizontal-Dh2hnSZO.js";import{_ as ae,r as h,o as c,f as m,e as x,w as s,n as t,c as e,V as o,B as a,F,h as le,t as d,y as I,q as ue,A as M,s as r,I as R,j as q,k as re,l as oe}from"./main-DSQZSxUQ.js";import{_ as _e}from"./UserProfileDialog-CTY8FY_2.js";import{d as g,b as A}from"./VChip-Cn_K2QQa.js";import{c as H,d as B,f as pe,b as X,h as ne,V as ie,a as j}from"./VCard-BcqOFmVx.js";import{V as G}from"./VImg-DH09EEkr.js";import{V as Z}from"./VTooltip-BKj5q_66.js";import{V as W}from"./VTable-Wo_mkCqB.js";import{V as L}from"./VAlert-B9VyE3fI.js";import{V as Y}from"./VRating-Ca6Hh_VV.js";import{a as ee,V as me}from"./VDialog-Blh8_RoS.js";import{V as te}from"./VSnackbar-Dq_vmvJJ.js";import{V as he,a as fe,b as K,c as Q}from"./VWindowItem-KvYrrSwJ.js";import"./index-C-dYQpaH.js";import"./chat-CR1sHBSs.js";import"./AuthStore-CEsAf0W6.js";import"./picker-DE4OueUM.js";import"./lodash-BYTxXjAY.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VContainer-DYwaZTjJ.js";import"./VTextField-BBk40cWF.js";import"./forwardRefs-DpySFFSZ.js";import"./ssrBoot-BtZjuRxH.js";import"./VOverlay-DEBETsQy.js";const P=y=>(re("data-v-bf2d9ba9"),y=y(),oe(),y),ve={class:"text-uppercase text-center"},ge={class:"text-uppercase text-center"},xe={class:"text-uppercase text-center"},ye={class:"text-uppercase text-center"},Ve={class:"text-uppercase text-center"},be={class:"text-uppercase text-center"},ke={class:"text-uppercase text-center"},we={class:"text-center"},Oe={class:"d-flex align-items-center"},$e={style:{color:"#6c757d","font-size":"12px"}},Pe={class:"d-flex align-items-center"},De={style:{color:"#6c757d","font-size":"12px"}},Se={class:"text-center"},Ce={class:"text-center"},Te={class:"text-center"},ze={class:"text-center"},Ae=P(()=>t("span",null,"View Details",-1)),Re={class:"text-uppercase text-center"},Ie={class:"text-uppercase text-center"},Ue={class:"text-uppercase text-center"},Me={class:"text-uppercase text-center"},je={class:"text-uppercase text-center"},Ne={class:"text-uppercase text-center"},Be={class:"text-uppercase text-center"},Fe={colspan:"8",class:"text-center"},Ee={class:"detail-row"},Ye=P(()=>t("strong",null,"Order ID",-1)),qe={class:"detail-row"},He=P(()=>t("strong",null,"Order Date Time",-1)),Ge={class:"detail-row"},We=P(()=>t("strong",null,"Provider",-1)),Le={class:"detail-row"},Je=P(()=>t("strong",null,"Status",-1)),Ke={key:0},Qe={key:1},Xe={key:0},Ze={key:0,class:"box-style"},et={class:"text-center"},tt={class:"headline mr-1 mt-4"},st={key:1,class:"box-style"},at={class:"text-center"},lt={class:"headline mr-1 mt-4"},rt={key:2,class:"box-style",style:{cursor:"not-allowed"}},ot={class:"text-center"},nt={class:"headline mr-1 mt-4"},it={key:1,class:"box-style",style:{cursor:"not-allowed"}},ct={class:"text-center"},dt={class:"headline mr-1 mt-4"},ut={class:"detail-row"},_t=P(()=>t("strong",null,"Service Name",-1)),pt={class:"detail-row"},mt=P(()=>t("strong",null,"Service Date Time",-1)),ht={key:0},ft={key:1},vt={class:"detail-row"},gt=P(()=>t("strong",null,"Service Duration",-1)),xt={key:0},yt={key:1},Vt={class:"detail-row"},bt=P(()=>t("strong",null,"Approximated Price",-1)),kt={key:0},wt={key:1},Ot={class:"detail-row"},$t=P(()=>t("strong",null,"Place to service",-1)),Pt={class:"detail-row",style:{display:"flex","align-items":"flex-start"}},Dt=P(()=>t("strong",null,"Customer Remark",-1)),St={style:{"white-space":"pre-line"}},Ct={class:"detail-row",style:{display:"flex","align-items":"flex-start"}},Tt=P(()=>t("strong",null,"Provider Remark",-1)),zt={style:{"white-space":"pre-line"}},At=P(()=>t("span",null,"Rating submitted successfully",-1)),Rt={__name:"ConfirmedServicePurchasesTable",props:{confirmedPurchasesOrders:{type:Object,required:!0},getPurchasesOrder:{type:Function,required:!0}},emits:["update:confirmedPurchasesOrders"],setup(y,{emit:V}){const C=y,i=h({}),b=h(!1),T=h(!1),U=h({}),z=h(!1),k=h(0),v=u=>{b.value=!0,i.value=u},_=u=>{U.value=u,T.value=!0},J=u=>{if(u===null)return!0;const n=new Date,l=new Date(n.getFullYear(),n.getMonth(),n.getDate());return new Date(u.split(" ")[0])<l},w=u=>{if(u===null)return!1;const n=new Date;return new Date(u.split(" ")[0])<n},p=u=>{q.post("/api/order-services/rate-provider",{order_id:u.id,rating:k.value}).then(n=>{console.log("Rating submitted"),k.value=0,z.value=!0,b.value=!1,C.getPurchasesOrder()}).catch(n=>{console.log(n)})};return(u,n)=>(c(),m(F,null,[y.confirmedPurchasesOrders.length>0?(c(),x(W,{key:0,height:"270","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",ve,[e(o,{icon:"ri-info-i"}),a(" Order ID ")]),t("th",ge,[e(o,{icon:"ri-product-hunt-line"}),a(" Service ")]),t("th",xe,[e(o,{icon:"ri-id-card-line"}),a(" Provider ")]),t("th",ye,[e(o,{icon:"ri-calendar-schedule-line"}),a(" Order Date ")]),t("th",Ve,[e(o,{icon:"ri-calendar-schedule-line"}),a(" Service Date ")]),t("th",be,[e(o,{icon:"ri-verified-badge-line"}),a(" Status ")]),t("th",ke,[e(o,{icon:"ri-eye-line"}),a(" View ")])])]),t("tbody",null,[(c(!0),m(F,null,le(y.confirmedPurchasesOrders,l=>(c(),m("tr",{key:l.id},[t("td",we,[J(l.service_dateTime)===!0?(c(),x(g,{key:0,color:"secondary"},{default:s(()=>[a(d(l.id),1)]),_:2},1024)):(c(),x(g,{key:1,color:"primary"},{default:s(()=>[a(d(l.id),1)]),_:2},1024))]),t("td",null,[t("div",Oe,[l.service.pictures.length>0&&l.service.pictures?(c(),x(H,{key:0,size:"32",rounded:"sm",style:{"margin-inline-end":"8px"}},{default:s(()=>[e(G,{src:l.service.pictures[0].picture_path},null,8,["src"])]),_:2},1024)):I("",!0),t("div",null,[t("div",null,d(l.service.name),1),t("div",$e,d(l.service.type),1)])])]),t("td",null,[t("div",Pe,[l.service.user.avatar?(c(),x(H,{key:0,size:"32",color:l.service.user.avatar?"":"primary",class:"mr-1"},{default:s(()=>[e(G,{src:l.service.user.avatar},null,8,["src"])]),_:2},1032,["color"])):I("",!0),t("div",null,[t("div",null,d(l.service.user.username),1),t("div",De,d(l.service.user.email),1)])])]),t("td",Se,d(l.order_dateTime),1),t("td",Ce,[l.status=="Approved"?(c(),x(g,{key:0,color:"warning",size:"x-small"},{default:s(()=>[a(d(l.service_dateTime),1)]),_:2},1024)):(c(),x(g,{key:1,color:"warning",size:"x-small"},{default:s(()=>[a("Not Set")]),_:1}))]),t("td",Te,[t("div",{class:ue(["status-dot",{"status-dot-read":l.status==="Rejected","status-dot-read2":l.status==="Cancelled"}])},[l.status=="Approved"?(c(),x(g,{key:0,color:"success",size:"x-small"},{default:s(()=>[a(d(l.status),1)]),_:2},1024)):I("",!0),l.status=="Rejected"?(c(),x(g,{key:1,color:"error",size:"x-small"},{default:s(()=>[a(d(l.status),1)]),_:2},1024)):I("",!0),l.status=="Cancelled"?(c(),x(g,{key:2,color:"secondary",size:"x-small"},{default:s(()=>[a(d(l.status),1)]),_:2},1024)):I("",!0)],2)]),t("td",ze,[e(M,{color:"primary",style:{"margin-inline":"15px 3px"},size:"small",onClick:S=>v(l)},{default:s(()=>[e(o,{icon:"ri-list-view"}),e(Z,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:s(()=>[Ae]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})):(c(),x(W,{key:1,height:"140","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",Re,[e(o,{icon:"ri-info-i"}),a(" Order ID ")]),t("th",Ie,[e(o,{icon:"ri-product-hunt-line"}),a(" Service ")]),t("th",Ue,[e(o,{icon:"ri-id-card-line"}),a(" Provider ")]),t("th",Me,[e(o,{icon:"ri-calendar-schedule-line"}),a(" Order Date ")]),t("th",je,[e(o,{icon:"ri-calendar-schedule-line"}),a(" Service Date ")]),t("th",Ne,[e(o,{icon:"ri-verified-badge-line"}),a(" Status ")]),t("th",Be,[e(o,{icon:"ri-eye-line"}),a(" View ")])])]),t("tbody",null,[t("tr",null,[t("td",Fe,[e(L,{variant:"tonal",type:"warning",class:"mt-2",color:"primary",closable:"",dense:""},{default:s(()=>[a(" No confirmed orders found. ")]),_:1})])])])]),_:1})),e(ee,{modelValue:r(b),"onUpdate:modelValue":n[7]||(n[7]=l=>R(b)?b.value=l:null),scrollable:"","max-width":"550"},{default:s(()=>[e(B,null,{default:s(()=>[e(pe,{class:"mt-2 mb-1"},{default:s(()=>[a("Order Details")]),_:1}),e(A,{class:"mb-2"}),e(X,{style:{"max-block-size":"400px","overflow-y":"auto"}},{default:s(()=>[t("div",Ee,[Ye,t("span",null,": #"+d(r(i).id),1)]),t("div",qe,[He,t("span",null,": "+d(r(i).order_dateTime),1)]),t("div",Ge,[We,t("span",null,": "+d(r(i).service.user.username),1)]),t("div",Le,[Je,r(i).status=="Approved"?(c(),m("span",Ke,[a(": "),e(g,{color:"success",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-fill",class:"mr-1"}),a(d(r(i).status),1)]),_:1})])):(c(),m("span",Qe,[a(": "),e(g,{color:"error",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),a(d(r(i).status),1)]),_:1})]))]),e(A,{class:"mt-2 mb-4"}),r(i).status=="Approved"?(c(),m("div",Xe,[w(r(i).service_dateTime)&&r(i).rating===null?(c(),m("div",Ze,[e(B,{elevation:"2"},{default:s(()=>[t("div",et,[t("h4",tt,[e(o,{icon:"ri-user-star-linee"}),a(" Rate The Provider ")]),e(A,{class:"mt-2 mb-2"}),e(Y,{modelValue:r(k),"onUpdate:modelValue":n[0]||(n[0]=l=>R(k)?k.value=l:null),"half-increments":"",hover:"",color:"secondary",size:"48"},null,8,["modelValue"])]),e(ne,{class:"justify-center"},{default:s(()=>[e(M,{color:"success",onClick:n[1]||(n[1]=l=>p(r(i)))},{default:s(()=>[a("Submit")]),_:1})]),_:1})]),_:1})])):w(r(i).service_dateTime)&&r(i).rating!==null?(c(),m("div",st,[e(B,{elevation:"2"},{default:s(()=>[t("div",at,[t("h4",lt,[e(o,{icon:"ri-user-star-line"}),a(" Rating Given For Provider ")]),e(A,{class:"mt-2 mb-2"}),e(Y,{modelValue:r(i).rating,"onUpdate:modelValue":n[2]||(n[2]=l=>r(i).rating=l),"half-increments":"",hover:"",color:"secondary",size:"48",readonly:!0},null,8,["modelValue"])])]),_:1})])):(c(),m("div",rt,[e(B,{elevation:"2"},{default:s(()=>[t("div",ot,[t("h4",nt,[e(o,{icon:"ri-user-star-line"}),a(" Rating Not Available Yet ")]),e(A,{class:"mt-2 mb-2"}),e(Y,{modelValue:r(i).rating,"onUpdate:modelValue":n[3]||(n[3]=l=>r(i).rating=l),"half-increments":"",hover:"",color:"secondary",size:"48",readonly:!0},null,8,["modelValue"])])]),_:1})]))])):(c(),m("div",it,[e(B,{elevation:"2"},{default:s(()=>[t("div",ct,[t("h4",dt,[e(o,{icon:"ri-user-star-line"}),a(" Rejected/Cancelled Order Cannot Be Rated ")]),e(A,{class:"mt-2 mb-2"}),e(Y,{modelValue:r(i).rating,"onUpdate:modelValue":n[4]||(n[4]=l=>r(i).rating=l),"half-increments":"",hover:"",color:"secondary",size:"48",readonly:!0},null,8,["modelValue"])])]),_:1})])),e(A,{class:"mt-2 mb-2"}),t("div",ut,[_t,t("span",null,": "+d(r(i).service.name),1)]),t("div",pt,[mt,r(i).status=="Approved"?(c(),m("span",ht,[a(": "),e(g,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-double-fill",class:"mr-1"}),a(d(r(i).service_dateTime),1)]),_:1})])):(c(),m("span",ft,[a(": "),e(g,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),a("Not Set")]),_:1})]))]),t("div",vt,[gt,r(i).status=="Approved"?(c(),m("span",xt,[a(": "),e(g,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-double-fill",class:"mr-1"}),a(d(r(i).duration),1)]),_:1})])):(c(),m("span",yt,[a(": "),e(g,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),a("Not Set")]),_:1})]))]),t("div",Vt,[bt,r(i).status=="Approved"?(c(),m("span",kt,[a(": "),e(g,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-double-fill",class:"mr-1"}),a(" ~ RM"+d(r(i).approximated_price),1)]),_:1})])):(c(),m("span",wt,[a(": "),e(g,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),a("Not Set")]),_:1})]))]),t("div",Ot,[$t,t("span",null,": "+d(r(i).place_to_service),1)]),e(A,{class:"mt-2 mb-2"}),t("div",Pt,[Dt,t("span",St,": "+d(r(i).remark_customer),1)]),t("div",Ct,[Tt,t("span",zt,": "+d(r(i).remark_provider),1)]),e(A,{class:"mt-2 mb-4"})]),_:1}),e(X,{class:"pt-5 mt-4"},{default:s(()=>[e(ie,null,{default:s(()=>[e(j,{cols:"12",md:"4"},{default:s(()=>[e(M,{color:"secondary",onClick:n[5]||(n[5]=l=>b.value=!1)},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),a(" Close ")]),_:1})]),_:1}),e(j,{cols:"12",md:"4"}),e(j,{cols:"12",md:"4"},{default:s(()=>[r(i).status=="Approved"?(c(),x(M,{key:0,color:"success",onClick:n[6]||(n[6]=l=>_(r(i).service.user))},{default:s(()=>[e(o,{icon:"ri-whatsapp-line",class:"mr-1"}),e(Z,{location:"top",activator:"parent",transition:"scroll-x-transition"},{default:s(()=>[a(" Contact Buyer ")]),_:1}),a(" Contact ")]),_:1})):I("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ee,{modelValue:r(T),"onUpdate:modelValue":n[8]||(n[8]=l=>R(T)?T.value=l:null),scrollable:"","max-width":"500"},{default:s(()=>[e(_e,{clickedUser:r(U)},null,8,["clickedUser"])]),_:1},8,["modelValue"]),e(te,{modelValue:r(z),"onUpdate:modelValue":n[9]||(n[9]=l=>R(z)?z.value=l:null),location:"top end",transition:"scale-transition",color:"success"},{default:s(()=>[e(o,{size:"20",class:"me-2"},{default:s(()=>[a("ri-checkbox-circle-line")]),_:1}),At]),_:1},8,["modelValue"])],64))}},se=ae(Rt,[["__scopeId","data-v-bf2d9ba9"]]),It={class:"text-uppercase text-center"},Ut={class:"text-uppercase text-center"},Mt={class:"text-uppercase text-center"},jt={class:"text-uppercase text-center"},Nt={class:"text-uppercase text-center"},Bt={class:"text-uppercase text-center"},Ft={class:"text-center"},Et={class:"d-flex align-items-center"},Yt={style:{color:"#6c757d","font-size":"12px"}},qt={class:"d-flex align-items-center"},Ht={style:{color:"#6c757d","font-size":"12px"}},Gt={class:"text-center"},Wt={class:"text-center"},Lt={class:"status-dot"},Jt={class:"text-center"},Kt=t("span",null,"Cancel Order",-1),Qt={class:"text-uppercase text-center"},Xt={class:"text-uppercase text-center"},Zt={class:"text-uppercase text-center"},es={class:"text-uppercase text-center"},ts={class:"text-uppercase text-center"},ss={class:"text-uppercase text-center"},as={colspan:"6",class:"text-center"},ls={__name:"PendingServicePurchasesTable",props:{pendingPurchasesOrders:{type:Object,required:!0}},setup(y){const V=h(!1),C=h(null),i=h(!1),b=h(!1),T=h(""),U=k=>{V.value=!0,C.value=k},z=()=>{q.put(`/api/order-services/cancel-pending-order/${C.value.id}`).then(k=>{V.value=!1,i.value=!0,setTimeout(()=>{window.location.reload()},1500)}).catch(k=>{console.log(k)})};return(k,v)=>(c(),m(F,null,[y.pendingPurchasesOrders.length>0?(c(),x(W,{key:0,height:"250","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",It,[e(o,{icon:"ri-info-i"}),a(" Order ID ")]),t("th",Ut,[e(o,{icon:"ri-product-hunt-line"}),a(" Service ")]),t("th",Mt,[e(o,{icon:"ri-id-card-line"}),a(" Provider ")]),t("th",jt,[e(o,{icon:"ri-calendar-schedule-line"}),a(" Order Date ")]),t("th",Nt,[e(o,{icon:"ri-verified-badge-line"}),a(" Status ")]),t("th",Bt,[e(o,{icon:"ri-close-circle-line"}),a(" Cancel ")])])]),t("tbody",null,[(c(!0),m(F,null,le(y.pendingPurchasesOrders,_=>(c(),m("tr",{key:_.id},[t("td",Ft,"#"+d(_.id),1),t("td",null,[t("div",Et,[_.service.pictures.length>0&&_.service.pictures?(c(),x(H,{key:0,size:"32",rounded:"sm",style:{"margin-inline-end":"8px"}},{default:s(()=>[e(G,{src:_.service.pictures[0].picture_path},null,8,["src"])]),_:2},1024)):I("",!0),t("div",null,[t("div",null,d(_.service.name),1),t("div",Yt,d(_.service.type),1)])])]),t("td",null,[t("div",qt,[_.service.user.avatar?(c(),x(H,{key:0,size:"32",color:_.service.user.avatar?"":"primary",class:"mr-1"},{default:s(()=>[e(G,{src:_.service.user.avatar},null,8,["src"])]),_:2},1032,["color"])):I("",!0),t("div",null,[t("div",null,d(_.service.user.username),1),t("div",Ht,d(_.service.user.email),1)])])]),t("td",Gt,d(_.order_dateTime),1),t("td",Wt,[t("div",Lt,[e(g,{color:"warning"},{default:s(()=>[a(d(_.status),1)]),_:2},1024)])]),t("td",Jt,[e(M,{color:"warning",style:{"margin-inline":"15px 3px"},size:"small",onClick:J=>U(_)},{default:s(()=>[e(o,{icon:"ri-close-circle-line"}),e(Z,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:s(()=>[Kt]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})):(c(),x(W,{key:1,height:"140","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",Qt,[e(o,{icon:"ri-info-i"}),a(" Order ID ")]),t("th",Xt,[e(o,{icon:"ri-product-hunt-line"}),a(" Service ")]),t("th",Zt,[e(o,{icon:"ri-id-card-line"}),a(" Provider ")]),t("th",es,[e(o,{icon:"ri-calendar-schedule-line"}),a(" Order Date ")]),t("th",ts,[e(o,{icon:"ri-verified-badge-line"}),a(" Status ")]),t("th",ss,[e(o,{icon:"ri-eye-line"}),a(" View ")])])]),t("tbody",null,[t("tr",null,[t("td",as,[e(L,{variant:"tonal",type:"warning",class:"mt-2",color:"primary",closable:"",dense:""},{default:s(()=>[a(" No pending orders found. ")]),_:1})])])])]),_:1})),e(ee,{modelValue:r(V),"onUpdate:modelValue":v[1]||(v[1]=_=>R(V)?V.value=_:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[e(B,{title:"Cancel Order?"},{default:s(()=>[e(X,null,{default:s(()=>[e(L,{color:"error",icon:"ri-alert-line",variant:"tonal"},{default:s(()=>[a(' Are you sure you want to cancel the order for the service "'),t("strong",null,d(r(C).service.name),1),a('" ')]),_:1})]),_:1}),e(ne,null,{default:s(()=>[e(me),e(M,{color:"secondary",onClick:v[0]||(v[0]=_=>V.value=!1)},{default:s(()=>[a(" Close ")]),_:1}),e(M,{color:"error",onClick:z},{default:s(()=>[a(" Cancel Order ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(te,{modelValue:r(i),"onUpdate:modelValue":v[2]||(v[2]=_=>R(i)?i.value=_:null),location:"top end",transition:"scale-transition",color:"success"},{default:s(()=>[e(o,{size:"20",class:"me-2"},{default:s(()=>[a("ri-checkbox-circle-line")]),_:1}),a(" Order has been successfully cancelled. ")]),_:1},8,["modelValue"]),e(te,{modelValue:r(b),"onUpdate:modelValue":v[3]||(v[3]=_=>R(b)?b.value=_:null),location:"top end",transition:"scale-transition",color:"error"},{default:s(()=>[e(o,{size:"20",class:"me-2"},{default:s(()=>[a("ri-alert-line")]),_:1}),a(" "+d(r(T)),1)]),_:1},8,["modelValue"])],64))}},E=y=>(re("data-v-533eaf47"),y=y(),oe(),y),rs={class:"box-style"},os={class:"box-style"},ns=E(()=>t("span",null,"Order of Purchasing Services",-1)),is=E(()=>t("p",null,[a(" This page displays pending and confirmed orders. Click ‘View’ to see order details. "),t("strong",null,"Grey color Order ID indicates orders past their service_dateTime for Confirmed Orders.")],-1)),cs=E(()=>t("span",null,"Pending Order",-1)),ds=E(()=>t("span",null,"Approved Order",-1)),us=E(()=>t("span",null,"Rejected/Cancelled Order",-1)),_s={class:"table-style"},ps={class:"table-style"},ms={class:"table-style"},hs={__name:"purchase-services",setup(y){const V=h("tab-1"),C=h([]),i=h([]),b=h([]),T=h(0),U=h(0),z=h(0),k=h(0),v=h([]),_=()=>{C.value=[],i.value=[],b.value=[],q.get("/api/order-services/get-purchases-orders").then(w=>{v.value=w.data.data,v.value.forEach(p=>{const u=n=>{const l=new Date(n),S=l.getFullYear(),O=String(l.getMonth()+1).padStart(2,"0"),$=String(l.getDate()).padStart(2,"0");let f=l.getHours();const D=String(l.getMinutes()).padStart(2,"0"),N=f>=12?"pm":"am";return f=f%12||12,`${S}-${O}-${$} ${f}:${D} ${N}`};p.order_dateTime=u(p.order_dateTime)}),v.value.forEach(p=>{if(p.service_dateTime){const u=p.service_dateTime.split(" "),n=u[1].split("-")[0],l=u[1].split("-")[1],S=n.split(":"),O=l.split(":");let $=parseInt(S[0]),f=parseInt(O[0]),D="AM",N="AM";$>=12&&($-=12,D="PM"),f>=12&&(f-=12,N="PM");const ce=`${u[0]} ${$}:${S[1]} ${D}-${f}:${O[1]} ${N}`;p.service_dateTime=ce}}),v.value.forEach(p=>{p.service.pictures.forEach(u=>{u.picture_path="/storage/"+u.picture_path})}),v.value.forEach(p=>{p.status=="Pending"?C.value.push(p):p.status=="Approved"?i.value.push(p):b.value.push(p)}),v.value.forEach(p=>{if(p.status!=="Cancelled"){const n=p.remark_customer.split("• ")[1].split(",")[1].split("-"),l=n[0].trim(),S=n[1].trim().split(`
`)[0],O=new Date(`2000/01/01 ${l}`),f=(new Date(`2000/01/01 ${S}`)-O)/(1e3*60),D=Math.floor(f/60),N=f%60;p.duration=`${D.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`}}),i.value.sort((p,u)=>{const n=new Date,l=new Date(n.getFullYear(),n.getMonth(),n.getDate()),S=D=>new Date(D.split(" ")[0]),O=S(p.service_dateTime),$=S(u.service_dateTime),f=D=>D.getFullYear()===l.getFullYear()&&D.getMonth()===l.getMonth()&&D.getDate()===l.getDate();return f(O)&&!f($)?-1:!f(O)&&f($)?1:f(O)&&f($)?0:O>n&&$>n?O-$:O>n?-1:$>n?1:$-O})}).catch(w=>{console.log(w)})};return(()=>{q.get("/api/order-services/count-auth-purchases").then(w=>{T.value=w.data.data.noPendingOrders,U.value=w.data.data.noApprovedOrders,z.value=w.data.data.noRejectedOrders,k.value=w.data.data.noCancelledOrders}).catch(w=>{console.log(w)})})(),_(),(w,p)=>{const u=de;return c(),m(F,null,[t("div",rs,[e(ie,{class:"no-gutters"},{default:s(()=>[e(j,{cols:"12",md:"3"},{default:s(()=>[e(u,{title:"Pending Orders",color:"warning",icon:"ri-emotion-happy-line",stats:r(T),change:0},null,8,["stats"])]),_:1}),e(j,{cols:"12",md:"3"},{default:s(()=>[e(u,{title:"Approved Orders",color:"success",icon:"ri-emotion-laugh-line",stats:r(U),change:0},null,8,["stats"])]),_:1}),e(j,{cols:"12",md:"3"},{default:s(()=>[e(u,{title:"Rejected Orders",color:"error",icon:"ri-emotion-unhappy-line",stats:r(z),change:0},null,8,["stats"])]),_:1}),e(j,{cols:"12",md:"3"},{default:s(()=>[e(u,{title:"Cancelled Orders",color:"secondary",icon:"ri-emotion-normal-line",stats:r(k),change:0},null,8,["stats"])]),_:1})]),_:1})]),t("div",os,[e(L,{variant:"tonal",color:"info"},{title:s(()=>[e(o,{icon:"ri-information-line",class:"mr-2"}),ns]),default:s(()=>[is]),_:1}),e(he,{modelValue:r(V),"onUpdate:modelValue":p[0]||(p[0]=n=>R(V)?V.value=n:null),grow:"",stacked:""},{default:s(()=>[e(K,{value:"tab-1"},{default:s(()=>[e(o,{icon:"ri-calendar-schedule-fill",class:"mb-2"}),cs]),_:1}),e(K,{value:"tab-2"},{default:s(()=>[e(o,{icon:"ri-calendar-check-fill",class:"mb-2"}),ds]),_:1}),e(K,{value:"tab-3"},{default:s(()=>[e(o,{icon:"ri-calendar-close-fill",class:"mb-2"}),us]),_:1})]),_:1},8,["modelValue"]),e(fe,{modelValue:r(V),"onUpdate:modelValue":p[1]||(p[1]=n=>R(V)?V.value=n:null),class:"mt-5"},{default:s(()=>[e(Q,{value:"tab-1"},{default:s(()=>[t("div",_s,[e(ls,{pendingPurchasesOrders:r(C)},null,8,["pendingPurchasesOrders"])])]),_:1}),e(Q,{value:"tab-2"},{default:s(()=>[t("div",ps,[e(se,{confirmedPurchasesOrders:r(i),getPurchasesOrder:_},null,8,["confirmedPurchasesOrders"])])]),_:1}),e(Q,{value:"tab-3"},{default:s(()=>[t("div",ms,[e(se,{confirmedPurchasesOrders:r(b),getPurchasesOrder:_},null,8,["confirmedPurchasesOrders"])])]),_:1})]),_:1},8,["modelValue"])])],64)}}},Bs=ae(hs,[["__scopeId","data-v-533eaf47"]]);export{Bs as default};
