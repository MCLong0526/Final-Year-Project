import{_ as ce}from"./CardStatisticsHorizontal-BdpGefO2.js";import{_ as se,r as p,o as c,f as m,e as h,w as s,n as t,c as e,V as o,B as l,F as N,h as le,t as d,y as C,q as de,A as U,s as r,I as A,j as Y,k as ae,l as re}from"./main-B25ePVUP.js";import{_ as ue}from"./UserProfileDialog-DFuHav-g.js";import{d as y,b as z}from"./VChip-qH_b82U_.js";import{c as q,d as M,f as _e,b as Q,h as oe,V as ne,a as j}from"./VCard-DKlGVmZQ.js";import{V as G}from"./VImg-Bs5GNfQ7.js";import{V as X}from"./VTooltip-BLFf6z2P.js";import{V as H}from"./VTable-DzkeKBvb.js";import{V as W}from"./VAlert-CBYYDBO1.js";import{V as E}from"./VRating-80lURuzG.js";import{a as Z,V as pe}from"./VDialog-DnjFhNkU.js";import{V as ee}from"./VSnackbar-BDbTjBPd.js";import{V as me,a as he,b as J,c as K}from"./VWindowItem-DlTpuipH.js";import"./index-BdM4AgZ6.js";import"./chat-CrLt6Fcs.js";import"./AuthStore-BcOrFwff.js";import"./picker-DE4OueUM.js";import"./lodash-BYTxXjAY.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VContainer-COE0NR_8.js";import"./VTextField-CnMui2jL.js";import"./forwardRefs-DUtNeXib.js";import"./ssrBoot-BJ2LaxIv.js";import"./VOverlay-CrSUZr3q.js";const b=f=>(ae("data-v-477fa26f"),f=f(),re(),f),fe={class:"text-uppercase text-center"},ve={class:"text-uppercase text-center"},ge={class:"text-uppercase text-center"},xe={class:"text-uppercase text-center"},ye={class:"text-uppercase text-center"},Ve={class:"text-uppercase text-center"},Oe={class:"text-uppercase text-center"},be={class:"text-center"},ke={class:"d-flex align-items-center"},we={style:{color:"#6c757d","font-size":"12px"}},$e={class:"d-flex align-items-center"},Ce={style:{color:"#6c757d","font-size":"12px"}},De={class:"text-center"},Pe={class:"text-center"},Se={class:"text-center"},Te={class:"text-center"},ze=b(()=>t("span",null,"View Details",-1)),Ae={class:"text-uppercase text-center"},Ie={class:"text-uppercase text-center"},Re={class:"text-uppercase text-center"},Ue={class:"text-uppercase text-center"},je={class:"text-uppercase text-center"},Me={class:"text-uppercase text-center"},Be={class:"text-uppercase text-center"},Ne={colspan:"8",class:"text-center"},Fe={class:"detail-row"},Ee=b(()=>t("strong",null,"Order ID",-1)),Ye={class:"detail-row"},qe=b(()=>t("strong",null,"Order Date Time",-1)),Ge={class:"detail-row"},He=b(()=>t("strong",null,"Seller",-1)),We={class:"detail-row"},Le=b(()=>t("strong",null,"Status",-1)),Je={key:0},Ke={key:1},Qe={key:2},Xe={key:0},Ze={key:0,class:"box-style"},et={class:"text-center"},tt={class:"headline mr-1 mt-4"},st={key:1,class:"box-style"},lt={class:"text-center"},at={class:"headline mr-1 mt-4"},rt={key:2,class:"box-style",style:{cursor:"not-allowed"}},ot={class:"text-center"},nt={class:"headline mr-1 mt-4"},it={key:1,class:"box-style",style:{cursor:"not-allowed"}},ct={class:"text-center"},dt={class:"headline mr-1 mt-4"},ut={class:"detail-row"},_t=b(()=>t("strong",null,"Item",-1)),pt={class:"detail-row"},mt=b(()=>t("strong",null,"Meet Date Time",-1)),ht={key:0},ft={key:1},vt={class:"detail-row"},gt=b(()=>t("strong",null,"Approximated Price",-1)),xt={key:0},yt={key:1},Vt={class:"detail-row",style:{display:"flex","align-items":"flex-start"}},Ot=b(()=>t("strong",null,"Place to meet",-1)),bt={style:{"white-space":"pre-line"}},kt={class:"detail-row",style:{display:"flex","align-items":"flex-start"}},wt=b(()=>t("strong",null,"Buyer Remark",-1)),$t={style:{"white-space":"pre-line"}},Ct={class:"detail-row",style:{display:"flex","align-items":"flex-start"}},Dt=b(()=>t("strong",null,"Seller Remark",-1)),Pt={style:{"white-space":"pre-line"}},St=b(()=>t("span",null,"Rating submitted successfully",-1)),Tt={__name:"ConfirmedItemPurchasesTable",props:{confirmedPurchasesOrders:{type:Object,required:!0},getPurchasesOrder:{type:Function,required:!0}},emits:["update:confirmedPurchasesOrders"],setup(f,{emit:V}){const P=f,n=p({}),v=p(!1),D=p(!1),I=p({}),S=p(!1),g=p(0),x=u=>{v.value=!0,n.value=u},_=u=>{I.value=u,D.value=!0},L=u=>{if(u===null)return!0;const i=new Date,a=new Date(i.getFullYear(),i.getMonth(),i.getDate());return(w=>new Date(w.split(" ")[0]))(u)<a},O=u=>{Y.post("/api/order-items/rate-seller",{order_id:u.id,rating:g.value}).then(i=>{console.log("Rating submitted"),g.value=0,S.value=!0,v.value=!1,P.getPurchasesOrder()}).catch(i=>{console.log(i)})};return(u,i)=>(c(),m(N,null,[f.confirmedPurchasesOrders.length>0?(c(),h(H,{key:0,height:"250","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",fe,[e(o,{icon:"ri-info-i"}),l(" Order ID ")]),t("th",ve,[e(o,{icon:"ri-product-hunt-line"}),l(" Product ")]),t("th",ge,[e(o,{icon:"ri-id-card-line"}),l(" Seller ")]),t("th",xe,[e(o,{icon:"ri-calendar-schedule-line"}),l(" Order Date ")]),t("th",ye,[e(o,{icon:"ri-calendar-schedule-line"}),l(" Meet Date ")]),t("th",Ve,[e(o,{icon:"ri-verified-badge-line"}),l(" Status ")]),t("th",Oe,[e(o,{icon:"ri-eye-line"}),l(" View ")])])]),t("tbody",null,[(c(!0),m(N,null,le(f.confirmedPurchasesOrders,a=>(c(),m("tr",{key:a.id},[t("td",be,[L(a.meet_dateTime)===!0?(c(),h(y,{key:0,color:"secondary"},{default:s(()=>[l(d(a.id),1)]),_:2},1024)):(c(),h(y,{key:1,color:"primary"},{default:s(()=>[l(d(a.id),1)]),_:2},1024))]),t("td",null,[t("div",ke,[a.item.pictures.length>0&&a.item.pictures?(c(),h(q,{key:0,size:"32",rounded:"sm",style:{"margin-inline-end":"8px"}},{default:s(()=>[e(G,{src:a.item.pictures[0].picture_path},null,8,["src"])]),_:2},1024)):C("",!0),t("div",null,[t("div",null,d(a.item.name),1),t("div",we,d(a.item.type),1)])])]),t("td",null,[t("div",$e,[a.item.user.avatar?(c(),h(q,{key:0,size:"32",color:a.item.user.avatar?"":"primary",class:"mr-1"},{default:s(()=>[e(G,{src:a.item.user.avatar},null,8,["src"])]),_:2},1032,["color"])):C("",!0),t("div",null,[t("div",null,d(a.item.user.username),1),t("div",Ce,d(a.item.user.email),1)])])]),t("td",De,d(a.order_dateTime),1),t("td",Pe,[a.status=="Approved"?(c(),h(y,{key:0,color:"warning",size:"x-small"},{default:s(()=>[l(d(a.meet_dateTime),1)]),_:2},1024)):(c(),h(y,{key:1,color:"warning",size:"x-small"},{default:s(()=>[l("Not Set")]),_:1}))]),t("td",Se,[t("div",{class:de(["status-dot",{"status-dot-read":a.status==="Rejected","status-dot-read2":a.status==="Cancelled"}])},[a.status=="Approved"?(c(),h(y,{key:0,color:"success",size:"x-small"},{default:s(()=>[l(d(a.status),1)]),_:2},1024)):C("",!0),a.status=="Rejected"?(c(),h(y,{key:1,color:"error",size:"x-small"},{default:s(()=>[l(d(a.status),1)]),_:2},1024)):C("",!0),a.status=="Cancelled"?(c(),h(y,{key:2,color:"secondary",size:"x-small"},{default:s(()=>[l(d(a.status),1)]),_:2},1024)):C("",!0)],2)]),t("td",Te,[e(U,{color:"primary",style:{"margin-inline":"15px 3px"},size:"small",onClick:k=>x(a)},{default:s(()=>[e(o,{icon:"ri-list-view"}),e(X,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:s(()=>[ze]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})):(c(),h(H,{key:1,height:"140","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",Ae,[e(o,{icon:"ri-info-i"}),l(" Order ID ")]),t("th",Ie,[e(o,{icon:"ri-product-hunt-line"}),l(" Product ")]),t("th",Re,[e(o,{icon:"ri-id-card-line"}),l(" Seller ")]),t("th",Ue,[e(o,{icon:"ri-calendar-schedule-line"}),l(" Order Date ")]),t("th",je,[e(o,{icon:"ri-calendar-schedule-line"}),l(" Meet Date ")]),t("th",Me,[e(o,{icon:"ri-verified-badge-line"}),l(" Status ")]),t("th",Be,[e(o,{icon:"ri-eye-line"}),l(" View ")])])]),t("tbody",null,[t("tr",null,[t("td",Ne,[e(W,{variant:"tonal",type:"warning",class:"mt-2",color:"primary",closable:"",dense:""},{default:s(()=>[l(" No confirmed orders found. ")]),_:1})])])])]),_:1})),e(Z,{modelValue:r(v),"onUpdate:modelValue":i[7]||(i[7]=a=>A(v)?v.value=a:null),scrollable:"","max-width":"500"},{default:s(()=>[e(M,null,{default:s(()=>[e(_e,{class:"mt-2 mb-1"},{default:s(()=>[l("Order Details")]),_:1}),e(z,{class:"mb-2"}),e(Q,{style:{"max-block-size":"400px","overflow-y":"auto"}},{default:s(()=>[t("div",Fe,[Ee,t("span",null,": #"+d(r(n).id),1)]),t("div",Ye,[qe,t("span",null,": "+d(r(n).order_dateTime),1)]),t("div",Ge,[He,t("span",null,": "+d(r(n).item.user.username),1)]),t("div",We,[Le,r(n).status=="Approved"?(c(),m("span",Je,[l(": "),e(y,{color:"success",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-fill",class:"mr-1"}),l(d(r(n).status),1)]),_:1})])):C("",!0),r(n).status=="Rejected"?(c(),m("span",Ke,[l(": "),e(y,{color:"error",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),l(d(r(n).status),1)]),_:1})])):C("",!0),r(n).status=="Cancelled"?(c(),m("span",Qe,[l(": "),e(y,{color:"secondary",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-circle-line",class:"mr-1"}),l(d(r(n).status),1)]),_:1})])):C("",!0)]),e(z,{class:"mt-2 mb-4"}),r(n).status=="Approved"?(c(),m("div",Xe,[r(n).meet_dateTime<new Date().toISOString()&&r(n).rating===null?(c(),m("div",Ze,[e(M,{elevation:"2"},{default:s(()=>[t("div",et,[t("h4",tt,[e(o,{icon:"ri-user-star-linee"}),l(" Rate The Seller ")]),e(z,{class:"mt-2 mb-2"}),e(E,{modelValue:r(g),"onUpdate:modelValue":i[0]||(i[0]=a=>A(g)?g.value=a:null),"half-increments":"",hover:"",color:"secondary",size:"48"},null,8,["modelValue"])]),e(oe,{class:"justify-center"},{default:s(()=>[e(U,{color:"success",onClick:i[1]||(i[1]=a=>O(r(n)))},{default:s(()=>[l("Submit")]),_:1})]),_:1})]),_:1})])):r(n).meet_dateTime<new Date().toISOString()&&r(n).rating!==null?(c(),m("div",st,[e(M,{elevation:"2"},{default:s(()=>[t("div",lt,[t("h4",at,[e(o,{icon:"ri-user-star-line"}),l(" Rating Given For Seller ")]),e(z,{class:"mt-2 mb-2"}),e(E,{modelValue:r(n).rating,"onUpdate:modelValue":i[2]||(i[2]=a=>r(n).rating=a),"half-increments":"",hover:"",color:"secondary",size:"48",readonly:!0},null,8,["modelValue"])])]),_:1})])):(c(),m("div",rt,[e(M,{elevation:"2"},{default:s(()=>[t("div",ot,[t("h4",nt,[e(o,{icon:"ri-user-star-line"}),l(" Rating Not Available Yet ")]),e(z,{class:"mt-2 mb-2"}),e(E,{modelValue:r(n).rating,"onUpdate:modelValue":i[3]||(i[3]=a=>r(n).rating=a),"half-increments":"",hover:"",color:"secondary",size:"48",readonly:!0},null,8,["modelValue"])])]),_:1})]))])):(c(),m("div",it,[e(M,{elevation:"2"},{default:s(()=>[t("div",ct,[t("h4",dt,[e(o,{icon:"ri-user-star-line"}),l(" Rejected/Cancelled Order Cannot Be Rated ")]),e(z,{class:"mt-2 mb-2"}),e(E,{modelValue:r(n).rating,"onUpdate:modelValue":i[4]||(i[4]=a=>r(n).rating=a),"half-increments":"",hover:"",color:"secondary",size:"48",readonly:!0},null,8,["modelValue"])])]),_:1})])),e(z,{class:"mt-2 mb-2"}),t("div",ut,[_t,t("span",null,": "+d(r(n).item.name),1)]),t("div",pt,[mt,r(n).status=="Approved"?(c(),m("span",ht,[l(": "),e(y,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-double-fill",class:"mr-1"}),l(d(r(n).meet_dateTime),1)]),_:1})])):(c(),m("span",ft,[l(": "),e(y,{color:"warning",size:"small"},{default:s(()=>[l("Not Set")]),_:1})]))]),t("div",vt,[gt,r(n).status=="Approved"?(c(),m("span",xt,[l(": "),e(y,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-check-double-fill",class:"mr-1"}),l(" ~ RM"+d(r(n).approximated_price),1)]),_:1})])):(c(),m("span",yt,[l(": "),e(y,{color:"warning",size:"small"},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),l("Not Set")]),_:1})]))]),t("div",Vt,[Ot,t("span",bt,": "+d(r(n).place_to_meet),1)]),e(z,{class:"mt-2 mb-2"}),t("div",kt,[wt,t("span",$t,": "+d(r(n).remark_buyer),1)]),t("div",Ct,[Dt,t("span",Pt,": "+d(r(n).remark_seller),1)]),e(z,{class:"mt-2 mb-4"})]),_:1}),e(Q,{class:"pt-5 mt-4"},{default:s(()=>[e(ne,null,{default:s(()=>[e(j,{cols:"12",md:"4"},{default:s(()=>[e(U,{color:"secondary",onClick:i[5]||(i[5]=a=>v.value=!1)},{default:s(()=>[e(o,{icon:"ri-close-line",class:"mr-1"}),l(" Close ")]),_:1})]),_:1}),e(j,{cols:"12",md:"4"}),e(j,{cols:"12",md:"4"},{default:s(()=>[r(n).status=="Approved"?(c(),h(U,{key:0,color:"success",onClick:i[6]||(i[6]=a=>_(r(n).item.user))},{default:s(()=>[e(o,{icon:"ri-whatsapp-line",class:"mr-1"}),e(X,{location:"top",activator:"parent",transition:"scroll-x-transition"},{default:s(()=>[l(" Contact Buyer ")]),_:1}),l(" Contact ")]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:r(D),"onUpdate:modelValue":i[8]||(i[8]=a=>A(D)?D.value=a:null),scrollable:"","max-width":"500"},{default:s(()=>[e(ue,{clickedUser:r(I)},null,8,["clickedUser"])]),_:1},8,["modelValue"]),e(ee,{modelValue:r(S),"onUpdate:modelValue":i[9]||(i[9]=a=>A(S)?S.value=a:null),location:"top end",transition:"scale-transition",color:"success"},{default:s(()=>[e(o,{size:"20",class:"me-2"},{default:s(()=>[l("ri-checkbox-circle-line")]),_:1}),St]),_:1},8,["modelValue"])],64))}},te=se(Tt,[["__scopeId","data-v-477fa26f"]]),zt={class:"text-uppercase text-center"},At={class:"text-uppercase text-center"},It={class:"text-uppercase text-center"},Rt={class:"text-uppercase text-center"},Ut={class:"text-uppercase text-center"},jt={class:"text-uppercase text-center"},Mt={class:"text-center"},Bt={class:"d-flex align-items-center"},Nt={style:{color:"#6c757d","font-size":"12px"}},Ft={class:"d-flex align-items-center"},Et={style:{color:"#6c757d","font-size":"12px"}},Yt={class:"text-center"},qt={class:"text-center"},Gt={class:"status-dot"},Ht={class:"text-center"},Wt=t("span",null,"Cancel Order",-1),Lt={class:"text-uppercase text-center"},Jt={class:"text-uppercase text-center"},Kt={class:"text-uppercase text-center"},Qt={class:"text-uppercase text-center"},Xt={class:"text-uppercase text-center"},Zt={class:"text-uppercase text-center"},es={colspan:"6",class:"text-center"},ts={__name:"PendingItemPurchasesTable",props:{pendingPurchasesOrders:{type:Object,required:!0}},setup(f){const V=p(!1),P=p(null),n=p(!1),v=p(!1),D=p(""),I=g=>{V.value=!0,P.value=g},S=()=>{Y.put(`/api/order-items/cancel-pending-order/${P.value.id}`).then(g=>{V.value=!1,n.value=!0,setTimeout(()=>{window.location.reload()},1500)}).catch(g=>{D.value=g.response.data.message,v.value=!0,console.log(g)})};return(g,x)=>(c(),m(N,null,[f.pendingPurchasesOrders.length>0?(c(),h(H,{key:0,height:"250","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",zt,[e(o,{icon:"ri-info-i"}),l(" Order ID ")]),t("th",At,[e(o,{icon:"ri-product-hunt-line"}),l(" Product ")]),t("th",It,[e(o,{icon:"ri-id-card-line"}),l(" Seller ")]),t("th",Rt,[e(o,{icon:"ri-calendar-schedule-line"}),l(" Order Date ")]),t("th",Ut,[e(o,{icon:"ri-verified-badge-line"}),l(" Status ")]),t("th",jt,[e(o,{icon:"ri-close-circle-line"}),l(" Cancel ")])])]),t("tbody",null,[(c(!0),m(N,null,le(f.pendingPurchasesOrders,_=>(c(),m("tr",{key:_.id},[t("td",Mt,"#"+d(_.id),1),t("td",null,[t("div",Bt,[_.item.pictures.length>0&&_.item.pictures?(c(),h(q,{key:0,size:"32",rounded:"sm",style:{"margin-inline-end":"8px"}},{default:s(()=>[e(G,{src:_.item.pictures[0].picture_path},null,8,["src"])]),_:2},1024)):C("",!0),t("div",null,[t("div",null,d(_.item.name),1),t("div",Nt,d(_.item.type),1)])])]),t("td",null,[t("div",Ft,[_.item.user.avatar?(c(),h(q,{key:0,size:"32",color:_.item.user.avatar?"":"primary",class:"mr-1"},{default:s(()=>[e(G,{src:_.item.user.avatar},null,8,["src"])]),_:2},1032,["color"])):C("",!0),t("div",null,[t("div",null,d(_.item.user.username),1),t("div",Et,d(_.item.user.email),1)])])]),t("td",Yt,d(_.order_dateTime),1),t("td",qt,[t("div",Gt,[e(y,{color:"warning"},{default:s(()=>[l(d(_.status),1)]),_:2},1024)])]),t("td",Ht,[e(U,{color:"warning",style:{"margin-inline":"15px 3px"},size:"small",onClick:L=>I(_)},{default:s(()=>[e(o,{icon:"ri-close-circle-line"}),e(X,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:s(()=>[Wt]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})):(c(),h(H,{key:1,height:"140","fixed-header":""},{default:s(()=>[t("thead",null,[t("tr",null,[t("th",Lt,[e(o,{icon:"ri-info-i"}),l(" Order ID ")]),t("th",Jt,[e(o,{icon:"ri-product-hunt-line"}),l(" Product ")]),t("th",Kt,[e(o,{icon:"ri-id-card-line"}),l(" Seller ")]),t("th",Qt,[e(o,{icon:"ri-calendar-schedule-line"}),l(" Order Date ")]),t("th",Xt,[e(o,{icon:"ri-verified-badge-line"}),l(" Status ")]),t("th",Zt,[e(o,{icon:"ri-eye-line"}),l(" View ")])])]),t("tbody",null,[t("tr",null,[t("td",es,[e(W,{variant:"tonal",type:"warning",class:"mt-2",color:"primary",closable:"",dense:""},{default:s(()=>[l(" No pending orders found. ")]),_:1})])])])]),_:1})),e(Z,{modelValue:r(V),"onUpdate:modelValue":x[1]||(x[1]=_=>A(V)?V.value=_:null),persistent:"",class:"v-dialog-sm"},{default:s(()=>[e(M,{title:"Cancel Order?"},{default:s(()=>[e(Q,null,{default:s(()=>[e(W,{color:"error",icon:"ri-alert-line",variant:"tonal"},{default:s(()=>[l(' Are you sure you want to cancel the order for the item "'),t("strong",null,d(r(P).item.name),1),l('" ')]),_:1})]),_:1}),e(oe,null,{default:s(()=>[e(pe),e(U,{color:"secondary",onClick:x[0]||(x[0]=_=>V.value=!1)},{default:s(()=>[l(" Close ")]),_:1}),e(U,{color:"error",onClick:S},{default:s(()=>[l(" Cancel Order ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ee,{modelValue:r(n),"onUpdate:modelValue":x[2]||(x[2]=_=>A(n)?n.value=_:null),location:"top end",transition:"scale-transition",color:"success"},{default:s(()=>[e(o,{size:"20",class:"me-2"},{default:s(()=>[l("ri-checkbox-circle-line")]),_:1}),l(" Order has been successfully cancelled. ")]),_:1},8,["modelValue"]),e(ee,{modelValue:r(v),"onUpdate:modelValue":x[3]||(x[3]=_=>A(v)?v.value=_:null),location:"top end",transition:"scale-transition",color:"error"},{default:s(()=>[e(o,{size:"20",class:"me-2"},{default:s(()=>[l("ri-alert-line")]),_:1}),l(" "+d(r(D)),1)]),_:1},8,["modelValue"])],64))}},F=f=>(ae("data-v-126daeef"),f=f(),re(),f),ss={class:"box-style"},ls={class:"box-style"},as=F(()=>t("span",null,"Order of Purchasing Items",-1)),rs=F(()=>t("p",null,[l(" This page displays pending and confirmed orders. Click ‘View’ to see order details. "),t("strong",null,"Grey color Order ID indicates orders past their meet_dateTime for Confirmed Orders.")],-1)),os=F(()=>t("span",null,"Pending Order",-1)),ns=F(()=>t("span",null,"Approved Order",-1)),is=F(()=>t("span",null,"Rejected/Cancelled Order",-1)),cs={class:"table-style"},ds={class:"table-style"},us={class:"table-style"},_s={__name:"purchase-items",setup(f){const V=p("tab-1"),P=p([]),n=p([]),v=p([]),D=p(0),I=p(0),S=p(0),g=p(0),x=p([]),_=()=>{P.value=[],n.value=[],v.value=[],Y.get("/api/order-items/get-purchases-orders").then(O=>{x.value=O.data.data,x.value.forEach(u=>{const i=a=>{const k=new Date(a),B=k.getFullYear(),w=String(k.getMonth()+1).padStart(2,"0"),T=String(k.getDate()).padStart(2,"0");let $=k.getHours();const R=String(k.getMinutes()).padStart(2,"0"),ie=$>=12?"pm":"am";return $=$%12||12,`${B}-${w}-${T} ${$}:${R} ${ie}`};u.order_dateTime=i(u.order_dateTime),u.meet_dateTime=i(u.meet_dateTime)}),x.value.forEach(u=>{u.item.pictures.forEach(i=>{i.picture_path="/storage/"+i.picture_path})}),x.value.forEach(u=>{u.status=="Pending"?P.value.push(u):u.status=="Approved"?n.value.push(u):v.value.push(u)}),n.value.sort((u,i)=>{const a=new Date,k=new Date(a.getFullYear(),a.getMonth(),a.getDate()),B=R=>new Date(R.split(" ")[0]),w=B(u.meet_dateTime),T=B(i.meet_dateTime),$=R=>R.getFullYear()===k.getFullYear()&&R.getMonth()===k.getMonth()&&R.getDate()===k.getDate();return $(w)&&!$(T)?-1:!$(w)&&$(T)?1:$(w)&&$(T)?0:w>a&&T>a?w-T:w>a?-1:T>a?1:T-w})}).catch(O=>{console.log(O)})};return(()=>{Y.get("/api/order-items/count-auth-purchases").then(O=>{D.value=O.data.data.noPendingOrders,I.value=O.data.data.noApprovedOrders,S.value=O.data.data.noRejectedOrders,g.value=O.data.data.noCancelledOrders}).catch(O=>{console.log(O)})})(),_(),(O,u)=>{const i=ce;return c(),m(N,null,[t("div",ss,[e(ne,{class:"no-gutters"},{default:s(()=>[e(j,{cols:"12",md:"3"},{default:s(()=>[e(i,{title:"Pending Orders",color:"warning",icon:"ri-emotion-happy-line",stats:r(D),change:0},null,8,["stats"])]),_:1}),e(j,{cols:"12",md:"3"},{default:s(()=>[e(i,{title:"Approved Orders",color:"success",icon:"ri-emotion-laugh-line",stats:r(I),change:0},null,8,["stats"])]),_:1}),e(j,{cols:"12",md:"3"},{default:s(()=>[e(i,{title:"Rejected Orders",color:"error",icon:"ri-emotion-unhappy-line",stats:r(S),change:0},null,8,["stats"])]),_:1}),e(j,{cols:"12",md:"3"},{default:s(()=>[e(i,{title:"Cancelled Orders",color:"secondary",icon:"ri-emotion-normal-line",stats:r(g),change:0},null,8,["stats"])]),_:1})]),_:1})]),t("div",ls,[e(W,{variant:"tonal",color:"info"},{title:s(()=>[e(o,{icon:"ri-information-line",class:"mr-2"}),as]),default:s(()=>[rs]),_:1}),e(me,{modelValue:r(V),"onUpdate:modelValue":u[0]||(u[0]=a=>A(V)?V.value=a:null),grow:"",stacked:""},{default:s(()=>[e(J,{value:"tab-1"},{default:s(()=>[e(o,{icon:"ri-calendar-schedule-fill",class:"mb-2"}),os]),_:1}),e(J,{value:"tab-2"},{default:s(()=>[e(o,{icon:"ri-calendar-check-fill",class:"mb-2"}),ns]),_:1}),e(J,{value:"tab-3"},{default:s(()=>[e(o,{icon:"ri-calendar-close-fill",class:"mb-2"}),is]),_:1})]),_:1},8,["modelValue"]),e(he,{modelValue:r(V),"onUpdate:modelValue":u[1]||(u[1]=a=>A(V)?V.value=a:null),class:"mt-5"},{default:s(()=>[e(K,{value:"tab-1"},{default:s(()=>[t("div",cs,[e(ts,{pendingPurchasesOrders:r(P)},null,8,["pendingPurchasesOrders"])])]),_:1}),e(K,{value:"tab-2"},{default:s(()=>[t("div",ds,[e(te,{confirmedPurchasesOrders:r(n),getPurchasesOrder:_},null,8,["confirmedPurchasesOrders"])])]),_:1}),e(K,{value:"tab-3"},{default:s(()=>[t("div",us,[e(te,{confirmedPurchasesOrders:r(v),getPurchasesOrder:_},null,8,["confirmedPurchasesOrders"])])]),_:1})]),_:1},8,["modelValue"])])],64)}}},js=se(_s,[["__scopeId","data-v-126daeef"]]);export{js as default};
