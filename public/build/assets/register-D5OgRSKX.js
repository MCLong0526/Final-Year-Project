import{_ as Q,r as u,b as X,J as Y,d as Z,G as ee,f as ae,l as i,c as e,w as l,F as le,o as h,V as m,A as p,q as v,U as se,e as C,z as E,t as M,B as $,y as te,j as re,k as oe}from"./main-lEbZc9Qq.js";import{V as L,r as w,p as j}from"./VForm-ByT5jH_s.js";import{d as ue,e as ne,b as ie,V as de,a as b}from"./VCard-C3wGqAAU.js";import{V as D}from"./VSnackbar-0nDvo1MC.js";import{V as me,a as z,b as ve,c as q}from"./VWindowItem-CZeh3sjK.js";import{V as y}from"./VTextField-DOMG4b8r.js";import{V as ce}from"./VCheckbox-CpwfnjR9.js";import{V as fe}from"./VTooltip-D209iAB3.js";import"./forwardRefs-BsNUNB3i.js";import"./VImg-w9c1v4tP.js";import"./VOverlay-DnFcKNdn.js";import"./ssrBoot-DlFXrGEI.js";import"./VCheckboxBtn-Cps_3O76.js";const pe=""+new URL("logo3-DsfuhDeI.png",import.meta.url).href,k=_=>(re("data-v-4e96d3e2"),_=_(),oe(),_),Ve={class:"auth-wrapper"},be={class:"auth-content"},ge={class:"d-flex"},he=["src"],we=k(()=>i("h5",{class:"text-h5 font-weight-semibold mb-1"},"Register Account",-1)),ye=k(()=>i("p",{class:"mb-0"},"Register account to access the platform.",-1)),ke=k(()=>i("span",null,"Personal Information",-1)),_e=k(()=>i("span",null,"Setup Password",-1)),xe=k(()=>i("span",null,"After registration, you can also register as a seller in your profile settings.",-1)),Ue={class:"d-flex flex-wrap gap-4 justify-sm-space-between justify-center mt-2"},Pe={__name:"register",setup(_){const c=u(""),x=u(""),V=u(""),G=X(),r=u(!1),f=u(""),I=u(""),n=u("tab-1"),o=u(""),U=u(!1),P=u(!1),S=u(!1),T=u(!1),F=u(""),g=u(!1),W=Y();Z(()=>W.global.name.value==="light"?authV1MaskLight:authV1MaskDark);const N=t=>/^[0-9]{5}@siswa\.unimas\.my$/.test(t)||"Email format is invalid, please use your unimas email",A=t=>/^0[0-9]{9,10}$/.test(t)||"Phone number must be valid",d=u(!1),B=()=>{if(o.value="",r.value=!1,f.value===""||c.value===""||V.value===""){o.value="Please fill in all the fields",r.value=!0;return}if(f.value!==""&&g.value===!1)if(f.value.length<6){o.value="Username must be at least 6 characters",r.value=!0;return}else H();else c.value!==""&&(N(c.value)!==!0?(o.value="Email format is invalid, please use your unimas email",r.value=!0):J());V.value!==""&&(A(V.value)!==!0?(o.value="Phone number format is invalid",r.value=!0):P.value=!0),U.value===!0&&P.value===!0&&g.value===!0&&(n.value="tab-2")},J=()=>{o.value="",r.value=!1,$.get("/api/auth/check-email-exists/",{params:{email:c.value}}).then(t=>{t.data.exists?(o.value="Email already exists",r.value=!0):(o.value="",r.value=!1,U.value=!0,U.value===!0&&P.value===!0&&g.value===!0&&(n.value="tab-2"))}).catch(t=>{console.error("Error checking email:",t),o.value="An error occurred while checking email.",r.value=!0})},H=()=>{o.value="",r.value=!1,$.get("/api/auth/check-username-exists/",{params:{username:f.value}}).then(t=>{t.data.exists?(o.value="Username already exists",r.value=!0):(o.value="",r.value=!1,g.value=!0,U.value===!0&&P.value===!0&&g.value===!0&&(n.value="tab-2"))}).catch(t=>{console.error("Error checking username:",t),o.value="An error occurred while checking username.",r.value=!0})};ee(n,t=>{t==="tab-2"&&(B(),o.value!==""&&(n.value="tab-1"))});const K=async()=>{if(x.value!==I.value){o.value="Password and Confirm Password do not match",r.value=!0;return}await $.post("/api/auth/user-register",{username:f.value,email:c.value,phone_number:V.value,password:x.value,isSeller:S.value,status:"active"}).then(t=>{F.value="User registered successfully",T.value=!0,setTimeout(()=>{G.replace("/login")},2e3)}).catch(t=>{console.error("Error registering user:",t),o.value=t.response.data.message,r.value=!0})};return(t,a)=>{const O=te("RouterLink");return h(),ae(le,null,[i("div",Ve,[i("div",be,[e(ue,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:l(()=>[e(O,{class:"text-primary ms-2",to:"/login"},{default:l(()=>[e(m,{class:"mb-1",icon:"ri-arrow-left-double-line"}),p(" Go to Login ")]),_:1}),e(ne,{class:"justify-center"},{prepend:l(()=>[i("div",ge,[i("img",{src:v(pe),alt:"Materio",class:"mr-2",height:"120",width:"160"},null,8,he)])]),_:1}),e(ie,{class:"pt-2"},{default:l(()=>[we,ye]),_:1}),e(me,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),grow:"",stacked:""},{default:l(()=>[e(z,{value:"tab-1"},{default:l(()=>[e(m,{icon:"ri-user-line",class:"mb-1"}),ke]),_:1}),e(z,{value:"tab-2"},{default:l(()=>[e(m,{icon:"ri-lock-line",class:"mb-1"}),_e]),_:1})]),_:1},8,["modelValue"]),e(ve,{modelValue:n.value,"onUpdate:modelValue":a[10]||(a[10]=s=>n.value=s),class:"mt-5"},{default:l(()=>[e(q,{value:"tab-1"},{default:l(()=>[e(L,{ref:"refForm"},{default:l(()=>[e(de,{class:"mb-1"},{default:l(()=>[e(b,{cols:"12",class:"mt-1"},{default:l(()=>[e(y,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=s=>f.value=s),label:"Username",rules:[v(w)]},null,8,["modelValue","rules"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(y,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s),label:"Email",type:"email",rules:[v(w),N]},null,8,["modelValue","rules"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(y,{modelValue:V.value,"onUpdate:modelValue":a[3]||(a[3]=s=>V.value=s),label:"Phone Number",type:"tel",rules:[v(w),A]},null,8,["modelValue","rules"])]),_:1}),e(b,{cols:"6",class:"ml-2"},{default:l(()=>[e(ce,{modelValue:S.value,"onUpdate:modelValue":a[4]||(a[4]=s=>S.value=s),label:"Register as a seller","true-value":!0},null,8,["modelValue"]),e(fe,{"open-on-focus":"","open-delay":"200",location:"end",activator:"parent",transition:"scroll-x-transition"},{default:l(()=>[xe]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),e(q,{value:"tab-2"},{default:l(()=>[e(L,{ref:"refForm",onSubmit:a[9]||(a[9]=se(()=>{},["prevent"]))},{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(y,{modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=s=>x.value=s),label:"Password",placeholder:"············",rules:[v(w),v(j)],type:d.value?"text":"password","append-inner-icon":d.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[6]||(a[6]=s=>d.value=!d.value)},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(y,{modelValue:I.value,"onUpdate:modelValue":a[7]||(a[7]=s=>I.value=s),label:"Confirm Password",placeholder:"············",rules:[v(w),v(j)],type:d.value?"text":"password","append-inner-icon":d.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[8]||(a[8]=s=>d.value=!d.value)},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),i("div",Ue,[n.value==="tab-1"?(h(),C(E,{key:0,color:"secondary",variant:"outlined",disabled:"",style:{cursor:"not-allowed"}},{default:l(()=>[e(m,{icon:"ri-arrow-left-line",start:"",class:"flip-in-rtl"}),p(" Previous ")]),_:1})):(h(),C(E,{key:1,onClick:a[11]||(a[11]=s=>n.value="tab-1")},{default:l(()=>[e(m,{icon:"ri-arrow-left-line",start:"",class:"flip-in-rtl"}),p(" Previous ")]),_:1})),n.value==="tab-1"?(h(),C(E,{key:2,onClick:a[12]||(a[12]=s=>{t.$refs.refForm.validate().then(R=>{R&&B()})})},{default:l(()=>[p(" Next "),e(m,{icon:"ri-arrow-right-line",end:"",class:"flip-in-rtl"})]),_:1})):(h(),C(E,{key:3,onClick:a[13]||(a[13]=s=>{t.$refs.refForm.validate().then(R=>{R&&K()})})},{default:l(()=>[p(" Register ")]),_:1}))])]),_:1})])]),e(D,{modelValue:r.value,"onUpdate:modelValue":a[14]||(a[14]=s=>r.value=s),location:"top end",transition:"scale-transition",color:"error"},{default:l(()=>[e(m,{size:"20",class:"me-2"},{default:l(()=>[p("ri-error-warning-line")]),_:1}),i("span",null,M(o.value),1)]),_:1},8,["modelValue"]),e(D,{modelValue:T.value,"onUpdate:modelValue":a[15]||(a[15]=s=>T.value=s),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[e(m,{size:"20",class:"me-2"},{default:l(()=>[p("ri-checkbox-circle-line")]),_:1}),i("span",null,M(F.value),1)]),_:1},8,["modelValue"])],64)}}},je=Q(Pe,[["__scopeId","data-v-4e96d3e2"]]);export{je as default};
