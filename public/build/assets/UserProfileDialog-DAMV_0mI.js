import{C as X}from"./chat-UMSTBY4D.js";import{u as Z}from"./AuthStore-BxafHt6p.js";import{r,o as V,f as ee,c as e,w as l,n as le,V as u,A as o,t as d,q as i,e as y,z as m,l as c,I as k,F as te,B as A}from"./main-BzGS6lt7.js";import{V as $,a as p,c as ae,f as U,g as C,d as D,b as M,h as R}from"./VCard-C7UJcP2z.js";import{V as se}from"./VImg-CwIRky4E.js";import{V as W}from"./VTooltip-BQSGeEjz.js";import{d as q,b as oe}from"./VChip-Bc8hxr8G.js";import{V as E}from"./VAlert-DGBZ1Xa_.js";import{V as Y,a as I}from"./VDialog-DkrFMseG.js";import{V as j}from"./VSnackbar-Bu9RkntP.js";const ne=c("span",null,"Click to unfollow",-1),re=c("span",{class:"text-xs"},"Following",-1),ie=c("span",null,"Click to follow",-1),ce=c("span",{class:"text-xs"},"Follow",-1),ue=c("br",null,null,-1),de=c("br",null,null,-1),Ce={__name:"UserProfileDialog",props:{clickedUser:{type:Object,required:!0}},emits:["update:clickedUser"],setup(n,{emit:me}){const H=n,L=Z(),S=r(0),B=r(0),N=r(0),h=r(0),T=r(!1),v=r(!1),f=r(!1),b=r({}),w=r(!1),x=r(!1),_=r(""),z=r(""),g=r(!1),O=r({}),F=async()=>{try{const a=await A.get(`/api/users/get-user-details/${H.clickedUser.user_id}`);S.value=a.data.data.items_count,B.value=a.data.data.services_count,N.value=a.data.data.followers_count,T.value=a.data.data.is_followed,h.value=a.data.data.ratings}catch(a){console.error(a)}},P=a=>{A.post("/api/users/follow-user/"+a.user_id).then(t=>{_.value=t.data.message,w.value=!0,v.value=!0,b.value=a,F()}).catch(t=>{z.value=t.response.data.message,x.value=!0,console.log(t)})},G=a=>{b.value=a,f.value=!0},J=()=>{A.post("/api/users/unfollow-user/"+b.value.user_id).then(a=>{_.value=a.data.message,w.value=!0,f.value=!1,F()}).catch(a=>{z.value=a.response.data.message,x.value=!0,console.log(a)})},K=a=>{O.value=a,g.value=!0},Q=a=>{const t=`Hello! I am ${L.user.username} from UNIMAS Web App. I would like to discuss the order here. Thank you.`,s=`https://web.whatsapp.com/send?phone=+60${a.phone_number}&text=${encodeURIComponent(t)}`;window.open(s,"_blank")};return F(),(a,t)=>(V(),ee(te,null,[e(D,null,{default:l(()=>[e($,{class:"text-center"},{default:l(()=>[e(p,{cols:"12",md:"2"}),e(p,{cols:"12",md:"8"},{default:l(()=>[e(ae,{size:"70",color:n.clickedUser.avatar?"":"primary",class:le([`${n.clickedUser.avatar?"":"v-avatar-light-bg primary--text"}`,"mt-6"]),variant:n.clickedUser.avatar?void 0:"tonal"},{default:l(()=>[e(se,{src:n.clickedUser.avatar},null,8,["src"])]),_:1},8,["color","class","variant"]),e(U,{style:{"font-size":"13px !important"}},{default:l(()=>[e(u,{icon:"ri-user-fill",size:"14",class:"mr-2"}),o(d(n.clickedUser.username)+" ",1),i(T)?(V(),y(m,{key:0,color:"success",class:"ml-2",variant:"tonal",size:"x-small",onClick:t[0]||(t[0]=s=>G(n.clickedUser))},{default:l(()=>[e(W,{"open-delay":"500",location:"right",activator:"parent",transition:"scroll-x-reverse-transition"},{default:l(()=>[ne]),_:1}),e(u,{icon:"ri-check-line",size:"16",class:"me-1"}),re]),_:1})):(V(),y(m,{key:1,color:"primary",class:"ml-2",variant:"tonal",size:"x-small",onClick:t[1]||(t[1]=s=>P(n.clickedUser))},{default:l(()=>[e(W,{"open-delay":"500",location:"right",activator:"parent",transition:"scroll-x-reverse-transition"},{default:l(()=>[ie]),_:1}),e(u,{icon:"ri-add-line",size:"16",class:"me-1"}),ce]),_:1}))]),_:1}),e(C,{class:"text-overline",style:{"font-size":"12px !important"}},{default:l(()=>[e(u,{icon:"ri-mail-fill",size:"18",class:"mr-2"}),o(d(n.clickedUser.email),1),ue,i(h)!==null?(V(),y(q,{key:0,color:"secondary",size:"small",variant:"outlined",class:"mt-2"},{default:l(()=>[e(u,{icon:"ri-star-fill",class:"mr-1",style:{color:"#fbb400"}}),o(" "+d(i(h))+" / 5 ",1)]),_:1})):(V(),y(q,{key:1,color:"secondary",variant:"outlined",class:"mt-2",size:"small"},{default:l(()=>[o(" No ratings yet ")]),_:1}))]),_:1})]),_:1}),e(p,{cols:"12",md:"2"})]),_:1}),e($,null,{default:l(()=>[e(m,{color:"primary",class:"mt-3 mb-3",onClick:t[2]||(t[2]=s=>K(n.clickedUser)),style:{"margin-inline":"120px 40px"}},{default:l(()=>[e(u,{icon:"ri-chat-3-line",class:"mr-2"}),o(" Chat ")]),_:1}),e(m,{color:"warning",class:"mt-3",onClick:t[3]||(t[3]=s=>Q(n.clickedUser))},{default:l(()=>[e(u,{icon:"ri-whatsapp-line",class:"mr-2"}),o(" Whatsapp ")]),_:1})]),_:1}),e(oe,{class:"mt-3"}),e($,{class:"mb-3 mt-1"},{default:l(()=>[e(p,{cols:"12",md:"4"},{default:l(()=>[e(U,{class:"text-center text-overline",style:{"font-size":"20px !important"}},{default:l(()=>[c("b",null,d(i(S)),1)]),_:1}),e(C,{class:"text-center text-overline",style:{"font-size":"10px !important"}},{default:l(()=>[e(u,{icon:"ri-shopping-cart-2-fill",size:"18",class:"mr-2"}),o("Items ")]),_:1})]),_:1}),e(p,{cols:"12",md:"4"},{default:l(()=>[e(U,{class:"text-center text-overline",style:{"font-size":"20px !important"}},{default:l(()=>[c("b",null,d(i(B)),1)]),_:1}),e(C,{class:"text-center text-overline",style:{"font-size":"10px !important"}},{default:l(()=>[e(u,{icon:"ri-service-fill",size:"18",class:"mr-2"}),o("Services ")]),_:1})]),_:1}),e(p,{cols:"12",md:"4"},{default:l(()=>[e(U,{class:"text-center text-overline",style:{"font-size":"20px !important"}},{default:l(()=>[c("b",null,d(i(N)),1)]),_:1}),e(C,{class:"text-center text-overline",style:{"font-size":"10px !important"}},{default:l(()=>[e(u,{icon:"ri-user-fill",size:"14",class:"mr-2"}),o("Followers ")]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{modelValue:i(v),"onUpdate:modelValue":t[5]||(t[5]=s=>k(v)?v.value=s:null),"max-width":"600"},{default:l(()=>[e(D,{title:"Follow User"},{default:l(()=>[e(M,null,{default:l(()=>[e(E,{color:"primary",icon:"ri-chat-smile-line",variant:"tonal"},{default:l(()=>[c("span",null,[o(" You are now following "+d(n.clickedUser.username)+"!",1),de,c("b",null,"Let's chat with "+d(n.clickedUser.username)+" in the chat section.",1)])]),_:1})]),_:1}),e(R,null,{default:l(()=>[e(Y),e(m,{color:"secondary",onClick:t[4]||(t[4]=s=>v.value=!1)},{default:l(()=>[o(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(I,{modelValue:i(f),"onUpdate:modelValue":t[7]||(t[7]=s=>k(f)?f.value=s:null),"max-width":"600"},{default:l(()=>[e(D,{title:"Are you sure you want to unfollow?"},{default:l(()=>[e(M,null,{default:l(()=>[e(E,{color:"error",icon:"ri-chat-smile-line",variant:"tonal"},{default:l(()=>[o(" You are about to unfollow "+d(n.clickedUser.username)+". Are you sure you want to proceed? ",1)]),_:1})]),_:1}),e(R,null,{default:l(()=>[e(Y),e(m,{color:"secondary",onClick:t[6]||(t[6]=s=>f.value=!1)},{default:l(()=>[o(" Close ")]),_:1}),e(m,{color:"error",onClick:J},{default:l(()=>[o(" Unfollow ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(I,{modelValue:i(g),"onUpdate:modelValue":t[8]||(t[8]=s=>k(g)?g.value=s:null),width:"900"},{default:l(()=>[e(X,{newChatUser:i(O)},null,8,["newChatUser"])]),_:1},8,["modelValue"]),e(j,{modelValue:i(x),"onUpdate:modelValue":t[9]||(t[9]=s=>k(x)?x.value=s:null),location:"top end",transition:"scale-transition",color:"error"},{default:l(()=>[e(u,{size:"20",class:"me-2"},{default:l(()=>[o("ri-error-warning-line")]),_:1}),c("span",null,d(i(z)),1)]),_:1},8,["modelValue"]),e(j,{modelValue:i(w),"onUpdate:modelValue":t[10]||(t[10]=s=>k(w)?w.value=s:null),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[e(u,{size:"20",class:"me-2"},{default:l(()=>[o("ri-checkbox-circle-line")]),_:1}),c("span",null,d(i(_)),1)]),_:1},8,["modelValue"])],64))}};export{Ce as _};
