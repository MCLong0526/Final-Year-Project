import{_ as Re,r as d,d as Je,G as ke,o as h,f as F,e as U,w as l,F as X,h as de,c as e,V as y,A as s,t as g,l as t,q as a,x as fe,n as qe,z as b,I,U as ce,a9 as Ke,B as K,j as Te,k as He,O as Xe}from"./main-DBCjatSc.js";import{V as Ee,r as Z}from"./VForm-DUtmtU-X.js";import{_ as el}from"./UserProfileDialog-DeSJMLvI.js";import{a as i,d as ee,f as Le,V,e as ll,b as M,c as De,h as he}from"./VCard-CpC9eyQd.js";import{V as Me,a as Be,b as Pe}from"./VTextarea-CHbJ-4DH.js";import{V as Ve}from"./VImg-XWxdmZX9.js";import{d as pe,a as Ye,c as Ze,V as tl}from"./VChip-0OycpOW8.js";import{V as be}from"./VAlert-BROa0I6J.js";import{V as Oe}from"./VRating-DHujEESq.js";import{V as G}from"./VTooltip-pvshr_uP.js";import{V as Se,a as le}from"./VDialog-Bxwq3dbB.js";import{V as Ue,a as Ae}from"./VCombobox-CPsadtvk.js";import{V as se}from"./VTextField-BkCnVzjt.js";import{V as ne}from"./VSnackbar-CCswJ9cc.js";import{l as Fe}from"./lodash-BYTxXjAY.js";import{V as je}from"./VTable-DyjTAmEp.js";import{V as al,a as Ge,b as ol,c as We}from"./VWindowItem-Tw1JcrDd.js";import{V as sl,a as Ce}from"./VRadioGroup-BvJ6X_h1.js";import{V as nl}from"./VRangeSlider-Cg5gkJF9.js";import{V as il}from"./VMenu-CDxxrzRK.js";import{V as Qe}from"./VPagination-DMFXMMEh.js";import"./forwardRefs-bRy3jzgY.js";import"./chat-CWGnJefo.js";import"./AuthStore-DvT2kHZy.js";import"./picker-DE4OueUM.js";import"./VContainer-CrchFGeo.js";import"./ssrBoot-DMLH7uSy.js";import"./VOverlay-CvC0C2qU.js";import"./VCheckboxBtn-BPBdgx37.js";import"./_commonjsHelpers-BosuxZz1.js";const k=x=>(Te("data-v-3fce9e98"),x=x(),He(),x),rl={class:"small-rating mt-1 ml-1"},ul=k(()=>t("h3",null,"Item Details",-1)),dl={key:0,class:"box-style"},cl={class:"ml-4 mt-4"},ml={style:{"font-size":"0.5em","font-weight":"normal"}},pl={key:1,class:"box-style"},fl=k(()=>t("h4",{class:"text-center mt-4 ml-2"},"No ratings yet",-1)),vl=k(()=>t("h3",{class:"mt-3"},"Seller Information",-1)),_l={style:{display:"inline-block","vertical-align":"top"}},yl=k(()=>t("span",null,"Click to view profile",-1)),gl={style:{color:"#6c757d","font-size":"12px"}},hl={style:{display:"inline-block","vertical-align":"top"}},Vl=k(()=>t("span",null,"You are the seller",-1)),bl={style:{color:"#6c757d","font-size":"12px"}},kl=k(()=>t("h3",{class:"mt-3"},"Details",-1)),xl={class:"detail-row"},$l=k(()=>t("strong",null,"Condition",-1)),Il={class:"detail-row"},wl=k(()=>t("strong",null,"Type",-1)),Cl={class:"detail-row"},Sl=k(()=>t("strong",null,"Quantity",-1)),Ul={class:"detail-row"},Dl=k(()=>t("strong",null,"Created At",-1)),Pl=k(()=>t("h3",{class:"mt-2"},"Description",-1)),Al=k(()=>t("span",null,"Interested? ",-1)),zl=k(()=>t("label",{for:"firstNameHorizontalIcons"},"Preferred Meet Up Date and Time",-1)),Nl=k(()=>t("span",null," You can select more than one date and time for seller to choose.",-1)),Ll=k(()=>t("label",{for:"placeHorizontalIcons"},"Preferred Place to Meet",-1)),Fl=k(()=>t("span",null," You can create your own place to meet by typing in the input field.",-1)),Rl=k(()=>t("kbd",null,"enter",-1)),Tl=k(()=>t("br",null,null,-1)),Hl=k(()=>t("small",null,"You can create your own place to meet by typing in the input field.",-1)),El=k(()=>t("label",{for:"mobileHorizontalIcons"},"Quantity",-1)),ql=k(()=>t("label",{for:"firstNameHorizontalIcons"},"Approximated Price",-1)),Ml=k(()=>t("label",{for:"remarkHorizontalIcons"},"Remark for Meet Up",-1)),Bl=k(()=>t("span",null,"To remove the date and time, click on the reset button.",-1)),Ol=k(()=>t("label",{for:"remarkHorizontalIcons"},"Remark",-1)),jl={__name:"ItemList",props:{allItems:{type:Object,required:!0},allItemLoad:{type:Function,required:!0}},setup(x){const te=x,w=d(!1),p=d({}),f=d(!1),q=d({}),P=d(!1),N=d(""),A=d(""),L=d(""),C=d(""),R=d(!1),D=d(null),T=d(!1),Q=d(""),B=Je(()=>p.value.price&&A.value?p.value.price*A.value:0),O=["Faculty of Cognitive Sciences and Human Development","Faculty of Computer Science and Information Technology","Faculty of Economics and Business","Faculty of Engineering","Faculty of Applied and Creative Arts","Faculty of Medicine and Health Sciences","Faculty of Resource Science and Technology","Faculty of Social Sciences and Humanities","Faculty of Built Environment","Faculty of Education, Language and Communication"],ae=S=>{w.value=!0,p.value=S},J=async()=>{if(!N.value||!D.value||!A.value){Q.value="Please fill in Meet Up Date and Time, Place to Meet, and Quantity.",T.value=!0;return}const S={place_to_meet:D.value,quantity:A.value,remark_buyer:C.value+`
`+L.value,item_id:p.value.item_id,approximated_price:B.value,status:"Pending"};try{await K.post("/api/order-items/store",S),P.value=!1,w.value=!1,te.allItemLoad(),N.value="",D.value=null,A.value="",L.value="",C.value="",R.value=!0}catch(c){Q.value=c.response.data.message,T.value=!0,console.error(c)}};ke(N,S=>{if(S){const c=new Date(S),m=`${c.getFullYear()}/${c.getMonth()+1}/${c.getDate()} ${c.getHours()%12||12}:${String(c.getMinutes()).padStart(2,"0")} ${c.getHours()>=12?"PM":"AM"}`;C.value.includes("Preferred meet up date and time:")?C.value=`${C.value}
• ${m}`:C.value=`Preferred meet up date and time:
• ${m}`}});const oe=S=>{f.value=!0,q.value=S};return ke(w,S=>{S||(N.value="",D.value=null,A.value="",L.value="",C.value="")}),(S,c)=>(h(),F(X,null,[x.allItems.length>0?(h(),U(V,{key:0,class:"mt-1 ml-1 mr-1"},{default:l(()=>[(h(!0),F(X,null,de(x.allItems,m=>(h(),U(i,{key:m.item_id,cols:"12",md:"3",sm:"6"},{default:l(()=>[e(ee,{class:"mb-2 box-style",style:{"block-size":"430px"},onClick:H=>ae(m)},{default:l(()=>[e(Me,{"delimiter-icon":"ri-circle-fill",height:"250px","hide-delimiter-background":"","show-arrows":"hover"},{default:l(()=>[(h(!0),F(X,null,de(m.pictures,(H,ie)=>(h(),U(Be,{key:ie},{default:l(()=>[e(Ve,{src:H.picture_path,height:"250px","object-fit":"cover",class:"mt-2 ml-2 mr-2"},null,8,["src"])]),_:2},1024))),128))]),_:2},1024),e(Le,null,{default:l(()=>[e(pe,{color:"primary",class:"mr-2",size:"small"},{default:l(()=>[e(y,{icon:"ri-price-tag-3-line",class:"mr-2"}),s(" "+g(m.type),1)]),_:2},1024)]),_:2},1024),e(V,{class:"ml-3 mt-2"},{default:l(()=>[e(y,{icon:"ri-shopping-bag-4-line",class:"mr-2"}),s(" "+g(m.name),1)]),_:2},1024),e(V,{class:"ml-3 mt-4"},{default:l(()=>[e(y,{icon:"ri-money-dollar-circle-line",class:"mr-2"}),s(" RM "+g(m.price),1)]),_:2},1024),e(V,{class:"ml-3 mt-4 mb-4"},{default:l(()=>[e(y,{icon:"ri-thumb-up-line",class:"mr-2"}),s(" "+g(m.condition),1)]),_:2},1024),e(V,{class:"ml-3 mt-4"},{default:l(()=>[m.rating!==null?(h(),U(pe,{key:0,color:"secondary",size:"small",variant:"outlined"},{default:l(()=>[e(y,{icon:"ri-star-fill",class:"mr-1",style:{color:"#fbb400"}}),s(" "+g(m.rating)+" / 5 ",1)]),_:2},1024)):(h(),U(pe,{key:1,color:"secondary",variant:"outlined",size:"small"},{default:l(()=>[s(" No ratings yet ")]),_:1})),t("span",rl,"("+g(m.rate_by)+" rates)",1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(h(),U(V,{key:1},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(ee,null,{default:l(()=>[e(be,{variant:"tonal",type:"warning",class:"mt-2 text-center",color:"primary",dense:"",closable:""},{default:l(()=>[s(" No selling items available at the moment. ")]),_:1})]),_:1})]),_:1})]),_:1})),e(le,{modelValue:a(w),"onUpdate:modelValue":c[5]||(c[5]=m=>I(w)?w.value=m:null),scrollable:"","max-width":"500",style:{"overflow-y":"hidden"}},{default:l(()=>[e(ee,null,{default:l(()=>[e(ll,{class:"pb-3 text-center"},{default:l(()=>[ul]),_:1}),e(M,{style:{"block-size":"420px"}},{default:l(()=>[e(Me,{"delimiter-icon":"ri-circle-fill",height:"250px","hide-delimiter-background":"","show-arrows":"hover"},{default:l(()=>[(h(!0),F(X,null,de(a(p).pictures,(m,H)=>(h(),U(Be,{key:H},{default:l(()=>[e(Ve,{src:m.picture_path,height:"250px","object-fit":"cover",class:"mt-2 ml-2 mr-2"},null,8,["src"])]),_:2},1024))),128))]),_:1}),e(V,{class:"mt-2"},{default:l(()=>[e(i,{cols:"12",md:"7",class:"mt-2"},{default:l(()=>[e(Le,null,{default:l(()=>[e(y,{icon:"ri-shopping-bag-4-line"}),s(" "+g(a(p).name),1)]),_:1}),e(Le,null,{default:l(()=>[e(y,{icon:"ri-money-dollar-circle-line"}),s(" RM "+g(a(p).price)+" per hour ",1)]),_:1})]),_:1}),e(i,{class:"mt-4 text-center",cols:"12",md:"5",style:{cursor:"not-allowed"}},{default:l(()=>[a(p).rating!==null?(h(),F("div",dl,[t("h2",cl,[s(g(a(p).rating),1),t("span",ml,"("+g(a(p).rate_by)+" rates)",1)]),a(p).rating!==null?(h(),U(Oe,{key:0,modelValue:a(p).rating,"onUpdate:modelValue":c[0]||(c[0]=m=>a(p).rating=m),"half-increments":"",color:"warning",size:"x-small",class:"ml-2"},null,8,["modelValue"])):fe("",!0)])):(h(),F("div",pl,[fl,a(p).rating===null?(h(),U(Oe,{key:0,modelValue:a(p).rating,"onUpdate:modelValue":c[1]||(c[1]=m=>a(p).rating=m),"half-increments":"",color:"warning",size:"x-small",class:"ml-2 mt-2"},null,8,["modelValue"])):fe("",!0)]))]),_:1})]),_:1}),vl,a(p).isOwn===!1?(h(),U(M,{key:0,class:"font-weight-medium text-high-emphasis text-truncate",style:{display:"flex","align-items":"center",cursor:"pointer"},onClick:c[2]||(c[2]=m=>oe(a(p).user))},{default:l(()=>[e(De,{size:"40",color:a(p).user.avatar?"":"primary",class:qe(`${a(p).user.avatar?"":"v-avatar-light-bg primary--text"}`),variant:a(p).user.avatar?void 0:"tonal",style:{"margin-inline-end":"8px"}},{default:l(()=>[e(Ve,{src:a(p).user.avatar},null,8,["src"])]),_:1},8,["color","class","variant"]),t("div",_l,[e(G,{location:"end","open-delay":"500",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[yl]),_:1}),t("div",null,g(a(p).user.username),1),t("div",gl,g(a(p).user.email),1)])]),_:1})):(h(),U(M,{key:1,class:"font-weight-medium text-high-emphasis text-truncate",style:{display:"flex","align-items":"center"}},{default:l(()=>[e(De,{size:"40",color:a(p).user.avatar?"":"primary",class:qe(`${a(p).user.avatar?"":"v-avatar-light-bg primary--text"}`),variant:a(p).user.avatar?void 0:"tonal",style:{"margin-inline-end":"8px"}},{default:l(()=>[e(Ve,{src:a(p).user.avatar},null,8,["src"])]),_:1},8,["color","class","variant"]),t("div",hl,[e(G,{location:"end","open-delay":"500",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[Vl]),_:1}),t("div",null,g(a(p).user.username),1),t("div",bl,g(a(p).user.email),1)])]),_:1})),kl,e(M,null,{default:l(()=>[t("div",xl,[$l,t("span",null,": "+g(a(p).condition),1)]),t("div",Il,[wl,t("span",null,": "+g(a(p).type),1)]),t("div",Cl,[Sl,t("span",null,": "+g(a(p).quantity),1)]),t("div",Ul,[Dl,t("span",null,": "+g(a(p).created_at),1)])]),_:1}),Pl,e(M,{style:{"white-space":"pre-line"}},{default:l(()=>[s(g(a(p).description),1)]),_:1})]),_:1}),e(M,{class:"pt-5 text-end"},{default:l(()=>[e(Se),e(b,{variant:"outlined",color:"secondary",class:"me-4",onClick:c[3]||(c[3]=m=>w.value=!1)},{default:l(()=>[s(" Close ")]),_:1}),a(p).isOwn===!1?(h(),U(b,{key:0,onClick:c[4]||(c[4]=m=>P.value=!0)},{default:l(()=>[e(G,{location:"top",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[Al]),_:1}),s(" Check Status ")]),_:1})):fe("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:a(P),"onUpdate:modelValue":c[14]||(c[14]=m=>I(P)?P.value=m:null),"max-width":"650",class:"dialog",style:{"overflow-x":"hidden"}},{default:l(()=>[e(ee,{title:"Order Item Information"},{default:l(()=>[e(M,null,{default:l(()=>[e(a(Ee),{ref:"refForm",onSubmit:c[13]||(c[13]=ce(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[zl]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(G,{location:"top","open-delay":"500",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[Nl]),_:1}),e(a(Ke),{"teleport-center":"",clearable:!0,"min-date":new Date,modelValue:a(N),"onUpdate:modelValue":c[6]||(c[6]=m=>I(N)?N.value=m:null),placeholder:"Select Date and Time",required:""},null,8,["min-date","modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Ll]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(G,{location:"top","open-delay":"500",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[Fl]),_:1}),e(Ue,{modelValue:a(D),"onUpdate:modelValue":c[7]||(c[7]=m=>I(D)?D.value=m:null),items:O,"prepend-inner-icon":"ri-map-pin-line","hide-selected":"","hide-no-data":!1,placeholder:"Select Place","persistent-hint":"",rules:[a(Z)]},{"no-data":l(()=>[e(Ye,null,{default:l(()=>[e(Ze,null,{default:l(()=>[s(" No results matching. Press "),Rl,s(" to use it."),Tl,Hl]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[El]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:a(A),"onUpdate:modelValue":c[8]||(c[8]=m=>I(A)?A.value=m:null),"prepend-inner-icon":"ri-survey-line",placeholder:"Enter Quantity",type:"number",rules:[a(Z),m=>m>0||"Quantity must be greater than 0"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[ql]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(pe,{color:"primary",class:"mr-2",size:"small"},{default:l(()=>[e(y,{icon:"ri-money-dollar-circle-line",class:"mr-2"}),s(" ~ RM "+g(a(B)),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":"",style:{cursor:"not-allowed"}},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Ml]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(G,{location:"top","open-delay":"500",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[Bl]),_:1}),e(Pe,{modelValue:a(C),"onUpdate:modelValue":c[9]||(c[9]=m=>I(C)?C.value=m:null),disabled:"",scrollable:"","prepend-inner-icon":"ri-chat-4-line",placeholder:"Enter Remark",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Ol]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Pe,{modelValue:a(L),"onUpdate:modelValue":c[10]||(c[10]=m=>I(L)?L.value=m:null),"prepend-inner-icon":"ri-chat-4-line",placeholder:"Enter Remark"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{"offset-md":"7",cols:"12",md:"9",class:"d-flex gap-4"},{default:l(()=>[e(b,{color:"secondary",variant:"tonal",onClick:c[11]||(c[11]=m=>{N.value="",D.value=null,A.value=null,L.value="",C.value=""})},{default:l(()=>[s(" Reset ")]),_:1}),e(b,{type:"submit",onClick:c[12]||(c[12]=m=>S.$refs.refForm.validate().then(()=>J()))},{default:l(()=>[s(" Send Request ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:a(f),"onUpdate:modelValue":c[15]||(c[15]=m=>I(f)?f.value=m:null),"max-width":"450"},{default:l(()=>[e(el,{clickedUser:a(q)},null,8,["clickedUser"])]),_:1},8,["modelValue"]),e(ne,{modelValue:a(R),"onUpdate:modelValue":c[16]||(c[16]=m=>I(R)?R.value=m:null),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[e(y,{size:"20",class:"me-2"},{default:l(()=>[s("ri-checkbox-circle-line")]),_:1}),s(" Order has been successfully placed. ")]),_:1},8,["modelValue"]),e(ne,{modelValue:a(T),"onUpdate:modelValue":c[17]||(c[17]=m=>I(T)?T.value=m:null),location:"top end",transition:"scale-transition",color:"error"},{default:l(()=>[e(y,{size:"20",class:"me-2"},{default:l(()=>[s("ri-alert-line")]),_:1}),s(" "+g(a(Q)),1)]),_:1},8,["modelValue"])],64))}},Gl=Re(jl,[["__scopeId","data-v-3fce9e98"]]),E=x=>(Te("data-v-2040d21e"),x=x(),He(),x),Wl={class:"text-uppercase text-center"},Ql={class:"text-uppercase text-center"},Yl={class:"text-uppercase text-center"},Zl={class:"text-uppercase text-center"},Jl={class:"text-uppercase text-center"},Kl={class:"text-uppercase text-center"},Xl={class:"text-uppercase text-center"},et={class:"text-center",style:{display:"flex","align-items":"center"}},lt={class:"text-center"},tt={class:"text-center"},at={class:"text-center"},ot={class:"text-center"},st={class:"text-center"},nt=E(()=>t("span",null,"Click to mark as Sold",-1)),it=E(()=>t("span",null,"Click to mark as Available",-1)),rt={class:"text-center"},ut=E(()=>t("span",null,"Edit",-1)),dt=E(()=>t("span",null,"Delete",-1)),ct={class:"text-uppercase text-center"},mt={class:"text-uppercase text-center"},pt={class:"text-uppercase text-center"},ft={class:"text-uppercase text-center"},vt={class:"text-uppercase text-center"},_t={class:"text-uppercase text-center"},yt={class:"text-uppercase text-center"},gt={class:"text-center",colspan:"7"},ht=E(()=>t("span",null,"Item pictures",-1)),Vt=E(()=>t("span",null,"Item Information",-1)),bt={class:"upload-container"},kt=E(()=>t("p",{class:"upload-text"},"Drag & Drop your images here.",-1)),xt=E(()=>t("p",{class:"upload-text"},"Click here to upload images (PNG, JPEG, JPG).",-1)),$t={key:0,class:"uploaded-images"},It=E(()=>t("p",{class:"upload-text"},"Selected images: ",-1)),wt=["src"],Ct={class:"button-container"},St=E(()=>t("label",{for:"firstNameHorizontalIcons"},"Item Name",-1)),Ut=E(()=>t("label",{for:"firstNameHorizontalIcons"},"Description",-1)),Dt=E(()=>t("label",{for:"firstNameHorizontalIcons"},"Condition",-1)),Pt=E(()=>t("label",{for:"firstNameHorizontalIcons"},"Type",-1)),At=E(()=>t("label",{for:"firstNameHorizontalIcons"},"Quantity",-1)),zt=E(()=>t("label",{for:"firstNameHorizontalIcons"},"Price",-1)),Nt={__name:"ItemTable",props:{items:{type:Object,required:!0},itemsLoad:{type:Function,required:!0},allItemLoad:{type:Function,required:!0},conditions:{type:Array,required:!0},types:{type:Array,required:!0}},emits:["update:items"],setup(x,{emit:te}){const w=x,p=d(!1),f=d({}),q=d(!1),P=d("tab-1"),N=d(!1),A=d(!1),L=d(!1),C=d(""),R=d(!1),D=d(!1),T=d(!1),Q=d(!1),B=d(""),O=d({}),ae=_=>{p.value=!0,f.value=_},J=_=>{q.value=!0,f.value=Object.assign({},_),f.value.pictures.forEach((o,n)=>{o.picture_path.startsWith("/storage")?fetch(o.picture_path).then(z=>z.blob()).then(z=>{const Y=new FileReader;Y.onload=re=>{o.picture_path=re.target.result,f.value.pictures.length-1},Y.readAsDataURL(z)}):o.picture_path.startsWith("/storage")&&(o.picture_path="data:image;base64,"+o.picture_path)})},oe=()=>{K.delete(`/api/items/delete/${f.value.item_id}`).then(_=>{p.value=!1,N.value=!0,w.itemsLoad(),w.allItemLoad()}).catch(_=>{C.value=_.response.data.message,L.value=!0,console.log(_)})},S=()=>{K.put(`/api/items/update/${f.value.item_id}`,{name:f.value.name,description:f.value.description,condition:f.value.condition,type:f.value.type,price:f.value.price,quantity:f.value.quantity,images:f.value.pictures,availability:f.value.availability}).then(_=>{q.value=!1,A.value=!0,w.itemsLoad(),w.allItemLoad()}).catch(_=>{C.value=_.response.data.message,L.value=!0,console.log(_)})},c=_=>{_.preventDefault();const o=_.dataTransfer.files;m(o)},m=_=>{const o=f.value.pictures.some(n=>!n.isNew);for(let n=0;n<_.length;n++){const z=_[n];if(z.type.startsWith("image/")){const Y=new FileReader;Y.onload=re=>{const me=re.target.result,$e=me.startsWith("data:image");let Ie=me;if($e||(Ie=me),f.value.pictures.push({picture_path:Ie,file:z,isNew:!$e}),o){const we=f.value.pictures.filter(v=>!v.isNew);we.forEach((v,r)=>{v.picture_path.startsWith("/storage")?fetch(v.picture_path).then($=>$.blob()).then($=>{const u=new FileReader;u.onload=ue=>{v.picture_path=ue.target.result,we.length-1},u.readAsDataURL($)}):v.picture_path.startsWith("/storage")&&(v.picture_path="data:image;base64,"+me)})}},Y.readAsDataURL(z)}}},H=d(null),ie=()=>{H.value&&H.value.click()},ve=_=>{const o=_.target.files;m(o)},xe=_=>{const o=f.value.pictures.splice(_,1)[0];o.isNew||fetch(o.picture_path).then(n=>n.blob()).then(n=>{const z=new FileReader;z.onload=Y=>{o.picture_path=Y.target.result},z.readAsDataURL(n)})},_e=_=>{K.put(`/api/items/update-status/${_}`,{availability:"Available"}).then(o=>{Q.value=!0,w.itemsLoad()}).catch(o=>{console.log(o)})},j=_=>{K.put(`/api/items/update-status/${_}`,{availability:"Sold"}).then(o=>{T.value=!0,w.itemsLoad()}).catch(o=>{console.log(o)})},ze=_=>{let o="";B.value==="radio-1"?o="Sold at this platform":B.value==="radio-2"?o="Sold at other platform":B.value==="radio-3"?o="Not sold yet":B.value==="radio-4"&&(o="Select not to answer"),K.put(`/api/items/update-statusinfo/${_}`,{status_info:o}).then(n=>{w.itemsLoad()}).catch(n=>{console.log(n)})},ye=_=>{O.value=_,R.value=!0},ge=()=>{j(O.value.item_id),ze(O.value.item_id),D.value=!1,R.value=!1},Ne=_=>_?isNaN(_)?"Price must be a number":_<=0?"Price must be greater than 0":!0:"Price is required";return(_,o)=>(h(),F(X,null,[x.items.length>0?(h(),U(je,{key:0,height:"250","fixed-header":""},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Wl,[e(y,{icon:"ri-shopping-bag-4-line"}),s(" Product ")]),t("th",Ql,[e(y,{icon:"ri-price-tag-3-line"}),s(" Type ")]),t("th",Yl,[e(y,{icon:"ri-thumb-up-line"}),s(" Condition ")]),t("th",Zl,[e(y,{icon:"ri-survey-line"}),s(" Quantity ")]),t("th",Jl,[e(y,{icon:"ri-money-dollar-circle-line"}),s(" Price ")]),t("th",Kl,[e(y,{icon:"ri-hand-heart-line"}),s(" Availability ")]),t("th",Xl,[e(y,{icon:"ri-settings-3-line"}),s(" Action ")])])]),t("tbody",null,[(h(!0),F(X,null,de(x.items,n=>(h(),F("tr",{key:n.item_id},[t("td",et,[n.pictures.length>0&&n.pictures?(h(),U(De,{key:0,size:"32",rounded:"sm",style:{"margin-inline":"30px 8px"},class:"square-avatar"},{default:l(()=>[e(Ve,{src:n.pictures[0].picture_path},null,8,["src"])]),_:2},1024)):fe("",!0),t("template",null,[e(De,{size:"32",color:"primary",rounded:"sm",style:{"margin-inline":"40px 8px"},class:"square-avatar"},{default:l(()=>[e(y,null,{default:l(()=>[s("ri-image-add-line")]),_:1})]),_:1})]),s(" "+g(n.name),1)]),t("td",lt,g(n.type),1),t("td",tt,g(n.condition),1),t("td",at,[n.quantity>0?(h(),U(pe,{key:0,color:"primary",size:"small"},{default:l(()=>[s(g(n.quantity),1)]),_:2},1024)):(h(),U(pe,{key:1,color:"secondary"},{default:l(()=>[s(g(n.quantity),1)]),_:2},1024))]),t("td",ot," RM "+g(n.price),1),t("td",st,[n.availability=="Available"?(h(),U(b,{key:0,variant:"text",color:"success",rounded:"pill",onClick:z=>ye(n)},{default:l(()=>[e(G,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[nt]),_:1}),e(y,{start:"",icon:"ri-checkbox-circle-line"}),s(" "+g(n.availability),1)]),_:2},1032,["onClick"])):(h(),U(b,{key:1,color:"error",variant:"text",rounded:"pill",onClick:z=>_e(n.item_id)},{default:l(()=>[e(G,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[it]),_:1}),e(y,{start:"",icon:"ri-close-circle-line"}),s(" "+g(n.availability),1)]),_:2},1032,["onClick"]))]),t("td",rt,[e(b,{color:"info",style:{"margin-inline":"8px 3px"},size:"small",onClick:z=>J(n)},{default:l(()=>[e(y,{icon:"ri-pencil-line"}),e(G,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[ut]),_:1})]),_:2},1032,["onClick"]),e(b,{color:"error",style:{"margin-inline":"5px 5px"},size:"small",onClick:z=>ae(n)},{default:l(()=>[e(y,{icon:"ri-delete-bin-line"}),e(G,{"open-delay":"500",location:"top",activator:"parent",transition:"scroll-y-transition"},{default:l(()=>[dt]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1})):(h(),U(je,{key:1,height:"140","fixed-header":""},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",ct,[e(y,{icon:"ri-shopping-bag-4-line"}),s(" Product ")]),t("th",mt,[e(y,{icon:"ri-thumb-up-line"}),s(" Condition ")]),t("th",pt,[e(y,{icon:"ri-price-tag-3-line"}),s(" Type ")]),t("th",ft,[e(y,{icon:"ri-survey-line"}),s(" Quantity ")]),t("th",vt,[e(y,{icon:"ri-money-dollar-circle-line"}),s(" Price ")]),t("th",_t,[e(y,{icon:"ri-hand-heart-line"}),s(" Availability ")]),t("th",yt,[e(y,{icon:"ri-settings-3-line"}),s(" Action ")])])]),t("tbody",null,[t("tr",null,[t("td",gt,[e(be,{variant:"tonal",type:"warning",class:"mt-2",color:"primary",closable:"",dense:""},{default:l(()=>[s(" No item available. Please add new item. ")]),_:1})])])])]),_:1})),e(le,{modelValue:a(p),"onUpdate:modelValue":o[1]||(o[1]=n=>I(p)?p.value=n:null),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(ee,{title:"Delete Item"},{default:l(()=>[e(M,null,{default:l(()=>[e(be,{color:"error",icon:"ri-alert-line",variant:"tonal"},{default:l(()=>[s(" Are you sure you want to delete product: "),t("strong",null,g(a(f).name),1),s(" ? ")]),_:1})]),_:1}),e(he,null,{default:l(()=>[e(Se),e(b,{color:"secondary",onClick:o[0]||(o[0]=n=>p.value=!1)},{default:l(()=>[s(" Cancel ")]),_:1}),e(b,{color:"error",onClick:oe},{default:l(()=>[s(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:a(q),"onUpdate:modelValue":o[16]||(o[16]=n=>I(q)?q.value=n:null),"max-width":"800",scrollable:"","max-height":"900"},{default:l(()=>[e(ee,{title:"Edit Selling Item"},{default:l(()=>[e(al,{modelValue:a(P),"onUpdate:modelValue":o[2]||(o[2]=n=>I(P)?P.value=n:null),grow:"",stacked:""},{default:l(()=>[e(Ge,{value:"tab-1"},{default:l(()=>[e(y,{icon:"ri-image-add-line",class:"mb-2"}),ht]),_:1}),e(Ge,{value:"tab-2"},{default:l(()=>[e(y,{icon:"ri-information-2-line",class:"mb-2"}),Vt]),_:1})]),_:1},8,["modelValue"]),e(ol,{modelValue:a(P),"onUpdate:modelValue":o[15]||(o[15]=n=>I(P)?P.value=n:null),class:"mt-5"},{default:l(()=>[e(We,{value:"tab-1"},{default:l(()=>[t("div",bt,[t("input",{type:"file",ref_key:"fileInput",ref:H,style:{display:"none"},accept:"image/*",onChange:ve},null,544),t("div",{class:"upload-box",onDrop:ce(c,["prevent"]),onDragover:o[3]||(o[3]=ce(()=>{},["prevent"])),onClick:ie},[e(y,{class:"upload-icon"},{default:l(()=>[s("ri-image-add-line")]),_:1}),kt,xt,a(f).pictures.length>0?(h(),F("div",$t,[It,(h(!0),F(X,null,de(a(f).pictures,(n,z)=>(h(),F("div",{key:z,class:"uploaded-image"},[t("img",{src:n.picture_path,alt:"Uploaded Image"},null,8,wt),e(b,{onClick:Y=>xe(z),icon:"ri-close-line",class:"remove-btn"},null,8,["onClick"])]))),128))])):fe("",!0)],32)]),e(he,null,{default:l(()=>[t("div",Ct,[e(b,{color:"secondary",onClick:o[4]||(o[4]=n=>q.value=!1)},{default:l(()=>[s("Cancel")]),_:1}),e(b,{color:"success",onClick:o[5]||(o[5]=n=>P.value="tab-2")},{default:l(()=>[s("Next")]),_:1})])]),_:1})]),_:1}),e(We,{value:"tab-2"},{default:l(()=>[e(M,null,{default:l(()=>[e(Ee,{ref:"refForm",onSubmit:o[14]||(o[14]=ce(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[St]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:a(f).name,"onUpdate:modelValue":o[6]||(o[6]=n=>a(f).name=n),"prepend-inner-icon":"ri-shopping-bag-4-line",placeholder:"Rolex",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Ut]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Pe,{modelValue:a(f).description,"onUpdate:modelValue":o[7]||(o[7]=n=>a(f).description=n),"prepend-inner-icon":"ri-information-2-line","no-resize":"",placeholder:"Describe the item, e.g., color, size, material, features...",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Dt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Ae,{modelValue:a(f).condition,"onUpdate:modelValue":o[8]||(o[8]=n=>a(f).condition=n),items:x.conditions,placeholder:"Select Condition","prepend-inner-icon":"ri-thumb-up-line",variant:"solo"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Pt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Ae,{modelValue:a(f).type,"onUpdate:modelValue":o[9]||(o[9]=n=>a(f).type=n),items:x.types,"prepend-inner-icon":"ri-price-tag-3-line",placeholder:"Select Type",variant:"solo"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[At]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:a(f).quantity,"onUpdate:modelValue":o[10]||(o[10]=n=>a(f).quantity=n),"prepend-inner-icon":"ri-survey-line",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[zt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:a(f).price,"onUpdate:modelValue":o[11]||(o[11]=n=>a(f).price=n),"prepend-inner-icon":"ri-money-dollar-circle-line",placeholder:"100.00",rules:[a(Z),Ne]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{"offset-md":"3",cols:"12",md:"9",class:"d-flex gap-4"},{default:l(()=>[e(b,{color:"info",onClick:o[12]||(o[12]=n=>P.value="tab-1"),variant:"tonal"},{default:l(()=>[s(" Back ")]),_:1}),e(b,{color:"secondary",type:"reset",variant:"tonal"},{default:l(()=>[s(" Reset ")]),_:1}),e(b,{type:"submit",onClick:o[13]||(o[13]=n=>_.$refs.refForm.validate().then(()=>S()))},{default:l(()=>[s(" Edit ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:a(R),"onUpdate:modelValue":o[19]||(o[19]=n=>I(R)?R.value=n:null),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(ee,{title:"Mark as Sold"},{default:l(()=>[e(M,null,{default:l(()=>[e(be,{color:"success",icon:"ri-checkbox-circle-line",variant:"tonal"},{default:l(()=>[s(" Are you sure you want to mark this item as sold? ")]),_:1})]),_:1}),e(he,null,{default:l(()=>[e(Se),e(b,{color:"secondary",onClick:o[17]||(o[17]=n=>R.value=!1)},{default:l(()=>[s(" Cancel ")]),_:1}),e(b,{color:"success",onClick:o[18]||(o[18]=n=>D.value=!0)},{default:l(()=>[s(" Mark as Sold ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:a(D),"onUpdate:modelValue":o[22]||(o[22]=n=>I(D)?D.value=n:null),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(ee,{title:"Have you sold this item?"},{default:l(()=>[e(M,null,{default:l(()=>[e(be,{color:"success",icon:"ri-checkbox-circle-line",variant:"tonal",class:"mb-3"},{default:l(()=>[s(" Please select where you have sold this item. ")]),_:1}),e(sl,{modelValue:a(B),"onUpdate:modelValue":o[20]||(o[20]=n=>I(B)?B.value=n:null)},{default:l(()=>[e(Ce,{label:"Yes, sold at this platform",value:"radio-1"}),e(Ce,{label:"Yes, sold at other platform",value:"radio-2"}),e(Ce,{label:"No, not sold yet",value:"radio-3"}),e(Ce,{label:"Select not to answer",value:"radio-4"})]),_:1},8,["modelValue"])]),_:1}),e(he,null,{default:l(()=>[e(Se),e(b,{color:"secondary",onClick:o[21]||(o[21]=n=>D.value=!1)},{default:l(()=>[s(" Back ")]),_:1}),e(b,{color:"success",onClick:ge},{default:l(()=>[s(" Submit ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ne,{modelValue:a(N),"onUpdate:modelValue":o[23]||(o[23]=n=>I(N)?N.value=n:null),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[e(y,{size:"20",class:"me-2"},{default:l(()=>[s("ri-checkbox-circle-line")]),_:1}),s(" Item "),t("strong",null,g(a(f).name),1),s(" has been successfully deleted. ")]),_:1},8,["modelValue"]),e(ne,{modelValue:a(A),"onUpdate:modelValue":o[24]||(o[24]=n=>I(A)?A.value=n:null),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[s(" Item "),t("strong",null,g(a(f).name),1),s(" information has been successfully edited. ")]),_:1},8,["modelValue"]),e(ne,{modelValue:a(T),"onUpdate:modelValue":o[25]||(o[25]=n=>I(T)?T.value=n:null),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[s(" Item "),t("strong",null,g(a(f).name),1),s(" has been successfully marked as sold. ")]),_:1},8,["modelValue"]),e(ne,{modelValue:a(Q),"onUpdate:modelValue":o[26]||(o[26]=n=>I(Q)?Q.value=n:null),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[s(" Item "),t("strong",null,g(a(f).name),1),s(" has been successfully marked as available. ")]),_:1},8,["modelValue"]),e(ne,{modelValue:a(L),"onUpdate:modelValue":o[27]||(o[27]=n=>I(L)?L.value=n:null),location:"top end",transition:"scale-transition",color:"error"},{default:l(()=>[e(y,{size:"20",class:"me-2"},{default:l(()=>[s("ri-alert-line")]),_:1}),s(" "+g(a(C)),1)]),_:1},8,["modelValue"])],64))}},Lt=Re(Nt,[["__scopeId","data-v-2040d21e"]]),W=x=>(Te("data-v-3b2e2748"),x=x(),He(),x),Ft={class:"box-style"},Rt=W(()=>t("h2",{class:"mt-3 ml-3 text-overline-4",style:{"font-weight":"400"}},"Filter Items",-1)),Tt=W(()=>t("span",null,"Click to reset the price range",-1)),Ht={class:"box-style"},Et=W(()=>t("span",null,"Click to view your selling items",-1)),qt={class:"item-list-container"},Mt={class:"box-style"},Bt={class:"mt-5 ml-5 mb-4"},Ot={class:"table-style"},jt=W(()=>t("label",{for:"firstNameHorizontalIcons"},"Item Name",-1)),Gt=W(()=>t("label",{for:"firstNameHorizontalIcons"},"Description",-1)),Wt=W(()=>t("label",{for:"firstNameHorizontalIcons"},"Condition",-1)),Qt=W(()=>t("label",{for:"firstNameHorizontalIcons"},"Type",-1)),Yt=W(()=>t("label",{for:"firstNameHorizontalIcons"},"Quantity",-1)),Zt=W(()=>t("label",{for:"firstNameHorizontalIcons"},"Price",-1)),Jt={class:"upload-container"},Kt=W(()=>t("p",{class:"upload-text"},"Drag & Drop your images here.",-1)),Xt=W(()=>t("p",{class:"upload-text"},"Click here to upload images (PNG, JPEG, JPG).",-1)),ea={key:0,class:"uploaded-images"},la=W(()=>t("p",{class:"upload-text"},"Selected images: ",-1)),ta=["src"],aa={class:"button-container"},oa={__name:"selling-item",setup(x){const te=d([]),w=d(!1),p=d(""),f=d(""),q=d(""),P=d(null),N=d(null),A=d(""),L=d([]),C=d(5),R=d(8),D=d(1),T=d(1),Q=d(0),B=d(0),O=d(""),ae=d(!1),J=d([]),oe=d([]),S=d([]),c=d(null),m=d(null),H=d(""),ie=d(!1),ve=d(!1),xe=d(""),_e=d(!1),j=d([0,200]),ze=[{title:"Price:Low to High",value:"Price:Low to High"},{title:"Price:High to Low",value:"Price:High to Low"},{title:"Item name: A to Z",value:"name: A to Z"},{title:"Item name: Z to A",value:"name: Z to A"}],ye=["New","Used (Like New)","Used (Good)","For parts or not working"],ge=["Fashion","Electronics","Furniture","Vehicles","Musical Instruments","Sports Equipment","Home Appliances","Books and Stationery","Health and Beauty","Toys and Games","Food and Beverages","Home Decor","Others"],Ne=async()=>{try{const v=localStorage.getItem("token");if(!v)throw new Error("Token not found");const r=await K.get("/api/auth/get-user-by-token",{headers:{Authorization:`Bearer ${v}`}});te.value=r.data.user,te.value.roles.forEach($=>{$.name==="Seller"&&(te.value.isSeller=!0)})}catch(v){router.push("/error-unauthorized"),console.error(v)}},_=Fe.debounce(()=>{let v="/api/items/get-all-items?per_page="+R.value+"&page="+T.value;S.value&&S.value.length>0&&(v+="&type="+S.value),m.value&&(v+="&condition="+m.value),H.value&&H.value.length>2&&(v+="&search="+H.value),c.value&&(c.value==="Price:Low to High"?v+="&sort=price&order=asc":c.value==="Price:High to Low"?v+="&sort=price&order=desc":c.value==="name: A to Z"?v+="&sort=name&order=asc":c.value==="name: Z to A"&&(v+="&sort=name&order=desc")),(j.value[0]!==0||j.value[1]!==200)&&(v+="&min_price="+j.value[0]+"&max_price="+j.value[1]),K.get(v).then(({data:r})=>{B.value=Math.ceil(r.data.total/R.value),oe.value=r.data.data,oe.value.forEach($=>{$.pictures.forEach(u=>{u.picture_path="/storage/"+u.picture_path})}),oe.value.forEach($=>{$.user_id===te.value.user_id?$.isOwn=!0:$.isOwn=!1}),oe.value.forEach($=>{$.created_at=new Date($.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})})}).catch(r=>{console.log(r)})},1e3),o=Fe.debounce(()=>{let v="/api/items/get-auth-items?per_page="+C.value+"&page="+D.value;O.value&&O.value.length>2&&(v+="&search="+O.value),K.get(v).then(({data:r})=>{Q.value=Math.ceil(r.data.total/C.value),L.value=r.data.data,L.value.forEach($=>{$.pictures.forEach(u=>{u.picture_path="/storage/"+u.picture_path})})}).catch(r=>{console.log(r)})},1e3),n=()=>{K.post("/api/items/store",{user_id:te.value.user_id,name:p.value,description:f.value,price:q.value,condition:P.value,type:N.value,quantity:A.value,images:J.value,availability:"Available"}).then(v=>{p.value="",f.value="",q.value="",P.value=null,N.value=null,w.value=!1,J.value=[],ae.value=!1,ie.value=!0,o(),_()}).catch(v=>{xe.value=v.response.data.message,ve.value=!0,console.log(v)})},z=v=>{v.preventDefault();const r=v.dataTransfer.files;Y(r)},Y=v=>{for(let r=0;r<v.length;r++){const $=v[r];if($.type.startsWith("image/")){const u=new FileReader;u.onload=ue=>{J.value.push({url:ue.target.result,file:$})},u.readAsDataURL($)}}},re=d(null),me=()=>{re.value&&re.value.click()},$e=v=>{const r=v.target.files;Y(r)},Ie=v=>{J.value.splice(v,1)};ke([C,D,O],()=>{o()}),ke([R,T,S,m,H,c],()=>{_()}),ke(j,Fe.debounce(v=>{_()},1500),{immediate:!0,deep:!0});const we=v=>v?isNaN(v)?"Price must be a number":v<=0?"Price must be greater than 0":!0:"Price is required";return o(),Ne(),_(),(v,r)=>{const $=Gl;return h(),F(X,null,[t("div",Ft,[Rt,e(V,{class:"mb-2 mt-2 ml-2 mr-2"},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[e(Ue,{modelValue:S.value,"onUpdate:modelValue":r[0]||(r[0]=u=>S.value=u),multiple:"",chips:"",items:ge,"prepend-inner-icon":"ri-price-tag-3-line","item-title":"name",placeholder:"Select type","return-object":"",label:"Type",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(Ue,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=u=>m.value=u),items:ye,"prepend-inner-icon":"ri-thumb-up-line","item-title":"name",placeholder:"Select Condition","return-object":"",label:"Condition",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(nl,{modelValue:j.value,"onUpdate:modelValue":r[2]||(r[2]=u=>j.value=u),min:0,max:800,"thumb-label":"always",step:"10",color:"primary","aria-label":"Price range slider"},{prepend:l(()=>[e(y,{small:"",color:"primary"},{default:l(()=>[s("mdi-currency-usd")]),_:1})]),append:l(()=>[e(y,{small:"",color:"primary"},{default:l(()=>[s("mdi-currency-usd")]),_:1})]),_:1},8,["modelValue"]),t("p",{class:"text-center mt-2",onClick:r[3]||(r[3]=u=>j.value=[0,200])},[e(G,{"open-delay":"500",location:"bottom",activator:"parent",transition:"scroll-x-transition"},{default:l(()=>[Tt]),_:1}),s(" Price range: RM"+g(j.value[0])+" - RM"+g(j.value[1]),1)])]),_:1}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(se,{modelValue:H.value,"onUpdate:modelValue":r[4]||(r[4]=u=>H.value=u),placeholder:"Search",label:"Search name or description of item",clearable:"",dense:""},null,8,["modelValue"])]),_:1})]),_:1})]),t("div",Ht,[e(V,{class:"mt-2 mr-2 mb-1 ml-2"},{default:l(()=>[te.value.isSeller?(h(),U(i,{key:0,cols:"12",md:"4"},{default:l(()=>[e(b,{onClick:r[5]||(r[5]=u=>_e.value=!0)},{default:l(()=>[e(G,{location:"top",activator:"parent",transition:"scroll-x-transition"},{default:l(()=>[Et]),_:1}),s(" Own Selling Items ")]),_:1})]),_:1})):(h(),U(i,{key:1,cols:"12",md:"4"})),e(i,{cols:"12",md:"4"}),e(i,{cols:"12",md:"4",class:"d-flex justify-end"},{default:l(()=>[e(il,{"open-on-hover":""},{activator:l(({props:u})=>[e(b,Xe(u,{color:"secondary"}),{default:l(()=>[e(y,{icon:"ri-sort-desc",class:"mr-2"}),s(" Sort By ")]),_:2},1040)]),default:l(()=>[e(tl,null,{default:l(()=>[(h(),F(X,null,de(ze,u=>e(Ye,{key:u.title,onClick:ue=>c.value=u.value},{default:l(()=>[e(Ze,null,{default:l(()=>[s(g(u.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),t("div",qt,[e($,{allItems:oe.value,allItemLoad:a(_)},null,8,["allItems","allItemLoad"])]),e(M,null,{default:l(()=>[e(V,null,{default:l(()=>[e(i,{cols:"12",md:"4"}),e(i,{cols:"12",md:"4"},{default:l(()=>[e(Qe,{modelValue:T.value,"onUpdate:modelValue":r[6]||(r[6]=u=>T.value=u),variant:"outlined",length:B.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1}),e(i,{cols:"12",md:"4"})]),_:1})]),_:1})]),e(le,{modelValue:_e.value,"onUpdate:modelValue":r[11]||(r[11]=u=>_e.value=u),"max-width":"1200"},{default:l(()=>[t("div",Mt,[e(V,null,{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[t("div",Bt,[e(b,{onClick:r[7]||(r[7]=u=>ae.value=!0)},{default:l(()=>[s(" Sell New Item ")]),_:1})])]),_:1}),e(i,{cols:"12",md:"3"}),e(i,{cols:"12",md:"3"}),e(i,{cols:"12",md:"3"},{default:l(()=>[e(se,{class:"mt-5 mr-5 mb-4",modelValue:O.value,"onUpdate:modelValue":r[8]||(r[8]=u=>O.value=u),placeholder:"Search",label:"Search name of the item",clearable:"",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),t("div",Ot,[e(Lt,{items:L.value,itemsLoad:a(o),allItemLoad:a(_),conditions:ye,types:ge},null,8,["items","itemsLoad","allItemLoad"])]),e(M,null,{default:l(()=>[e(V,null,{default:l(()=>[e(i,{cols:"12",md:"2"},{default:l(()=>[e(Ue,{modelValue:C.value,"onUpdate:modelValue":r[9]||(r[9]=u=>C.value=u),items:[5,10,15,20],label:"Rows per page",dense:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"}),e(i,{cols:"12",md:"4"},{default:l(()=>[e(Qe,{modelValue:D.value,"onUpdate:modelValue":r[10]||(r[10]=u=>D.value=u),variant:"outlined",length:Q.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"]),e(le,{modelValue:w.value,"onUpdate:modelValue":r[21]||(r[21]=u=>w.value=u),"max-width":"800"},{default:l(()=>[e(ee,{title:"Sell New Item"},{default:l(()=>[e(M,null,{default:l(()=>[e(Ee,{ref:"refForm",onSubmit:r[20]||(r[20]=ce(()=>{},["prevent"]))},{default:l(()=>[e(V,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[jt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:p.value,"onUpdate:modelValue":r[12]||(r[12]=u=>p.value=u),"prepend-inner-icon":"ri-shopping-bag-4-line",placeholder:"Rolex",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Gt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Pe,{modelValue:f.value,"onUpdate:modelValue":r[13]||(r[13]=u=>f.value=u),"prepend-inner-icon":"ri-information-2-line","no-resize":"",placeholder:"Describe the item, e.g., color, size, material, features...",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Wt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Ae,{modelValue:P.value,"onUpdate:modelValue":r[14]||(r[14]=u=>P.value=u),items:ye,placeholder:"Select Condition","prepend-inner-icon":"ri-thumb-up-line",variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Qt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(Ae,{modelValue:N.value,"onUpdate:modelValue":r[15]||(r[15]=u=>N.value=u),items:ge,"prepend-inner-icon":"ri-price-tag-3-line",placeholder:"Select Type",variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Yt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:A.value,"onUpdate:modelValue":r[16]||(r[16]=u=>A.value=u),"prepend-inner-icon":"ri-shopping-bag-4-line",placeholder:"1",rules:[a(Z)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:l(()=>[e(V,{"no-gutters":""},{default:l(()=>[e(i,{cols:"12",md:"3"},{default:l(()=>[Zt]),_:1}),e(i,{cols:"12",md:"9"},{default:l(()=>[e(se,{modelValue:q.value,"onUpdate:modelValue":r[17]||(r[17]=u=>q.value=u),"prepend-inner-icon":"ri-money-dollar-circle-line",placeholder:"100.00",rules:[a(Z),we]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(i,{"offset-md":"3",cols:"12",md:"9",class:"d-flex gap-4"},{default:l(()=>[e(b,{color:"info",onClick:r[18]||(r[18]=u=>w.value=!1),variant:"tonal"},{default:l(()=>[s(" Back ")]),_:1}),e(b,{color:"secondary",type:"reset",variant:"tonal"},{default:l(()=>[s(" Reset ")]),_:1}),e(b,{type:"submit",onClick:r[19]||(r[19]=u=>v.$refs.refForm.validate().then(()=>n()))},{default:l(()=>[s(" Publish ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:ae.value,"onUpdate:modelValue":r[25]||(r[25]=u=>ae.value=u),"max-width":"600"},{default:l(()=>[e(ee,{title:"Add Item Pictures"},{default:l(()=>[t("div",Jt,[t("input",{type:"file",ref_key:"fileInput",ref:re,style:{display:"none"},accept:"image/*",onChange:$e},null,544),t("div",{class:"upload-box",onDrop:ce(z,["prevent"]),onDragover:r[22]||(r[22]=ce(()=>{},["prevent"])),onClick:me},[e(y,{class:"upload-icon"},{default:l(()=>[s("ri-image-add-line")]),_:1}),Kt,Xt,J.value.length>0?(h(),F("div",ea,[la,(h(!0),F(X,null,de(J.value,(u,ue)=>(h(),F("div",{key:ue,class:"uploaded-image"},[t("img",{src:u.url,alt:"Uploaded Image"},null,8,ta),e(b,{onClick:sa=>Ie(ue),icon:"ri-close-line",class:"remove-btn"},null,8,["onClick"])]))),128))])):fe("",!0)],32)]),e(he,null,{default:l(()=>[t("div",aa,[e(b,{color:"secondary",onClick:r[23]||(r[23]=u=>ae.value=!1)},{default:l(()=>[s("Cancel")]),_:1}),e(b,{color:"success",onClick:r[24]||(r[24]=u=>w.value=!0)},{default:l(()=>[s("Next")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ne,{modelValue:ie.value,"onUpdate:modelValue":r[26]||(r[26]=u=>ie.value=u),location:"top end",transition:"scale-transition",color:"success"},{default:l(()=>[e(y,{size:"20",class:"me-2"},{default:l(()=>[s("ri-checkbox-circle-line")]),_:1}),s(" New item has been successfully registered. ")]),_:1},8,["modelValue"]),e(ne,{modelValue:ve.value,"onUpdate:modelValue":r[27]||(r[27]=u=>ve.value=u),location:"top end",transition:"scale-transition",color:"error"},{default:l(()=>[e(y,{size:"20",class:"me-2"},{default:l(()=>[s("ri-alert-line")]),_:1}),s(" "+g(xe.value),1)]),_:1},8,["modelValue"])],64)}}},Fa=Re(oa,[["__scopeId","data-v-3b2e2748"]]);export{Fa as default};
